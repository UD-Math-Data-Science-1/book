<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.54">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>1&nbsp; Representation of data – Data Science 1</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script><script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./stats.html" rel="next">
<link href="./starting.html" rel="prev">
<link href="./_media/logo_small.png" rel="icon" type="image/png">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script src="site_libs/quarto-contrib/glightbox/glightbox.min.js"></script>
<link href="site_libs/quarto-contrib/glightbox/glightbox.min.css" rel="stylesheet">
<link href="site_libs/quarto-contrib/glightbox/lightbox.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script> 
MathJax = {
  chtml: {
    scale: 0.92,
  }
}
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="nav-sidebar floating slimcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./data.html"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Representation of data</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto"><div class="quarto-sidebar-header"><div class="sidebar-header-item">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="_media/logo_small.png" class="quarto-figure quarto-figure-center figure-img" height="120"></p>
</figure>
</div>
</div></div>
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Data Science 1</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preface</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./examples.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">List of examples</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./resources.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Resources</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./starting.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Getting started</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./data.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Representation of data</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stats.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Descriptive statistics</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./classification.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Classification</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./selection.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Model selection</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./regression.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Regression</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./clustering.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Clustering</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./networks.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Networks</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./review.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Review questions by section</span></a>
  </div>
</li>
    </ul>
    </div>
<div class="quarto-sidebar-footer"><div class="sidebar-footer-item">
<p>Copyright (c) 2024 by <a href="https://tobydriscoll.net">Toby Driscoll</a></p>
</div></div></nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#quantitative-data" id="toc-quantitative-data" class="nav-link active" data-scroll-target="#quantitative-data"><span class="header-section-number">1.1</span> Quantitative data</a>
  <ul class="collapse">
  <li><a href="#inf-and-nan" id="toc-inf-and-nan" class="nav-link" data-scroll-target="#inf-and-nan"><span class="header-section-number">1.1.1</span> Inf and NaN</a></li>
  <li><a href="#dates-and-times" id="toc-dates-and-times" class="nav-link" data-scroll-target="#dates-and-times"><span class="header-section-number">1.1.2</span> Dates and times</a></li>
  </ul></li>
  <li><a href="#vectors" id="toc-vectors" class="nav-link" data-scroll-target="#vectors"><span class="header-section-number">1.2</span> Vectors</a>
  <ul class="collapse">
  <li><a href="#element-access" id="toc-element-access" class="nav-link" data-scroll-target="#element-access"><span class="header-section-number">1.2.1</span> Element access</a></li>
  <li><a href="#slicing" id="toc-slicing" class="nav-link" data-scroll-target="#slicing"><span class="header-section-number">1.2.2</span> Slicing</a></li>
  </ul></li>
  <li><a href="#arrays" id="toc-arrays" class="nav-link" data-scroll-target="#arrays"><span class="header-section-number">1.3</span> Arrays</a>
  <ul class="collapse">
  <li><a href="#indexing-and-slicing" id="toc-indexing-and-slicing" class="nav-link" data-scroll-target="#indexing-and-slicing"><span class="header-section-number">1.3.1</span> Indexing and slicing</a></li>
  <li><a href="#reductions" id="toc-reductions" class="nav-link" data-scroll-target="#reductions"><span class="header-section-number">1.3.2</span> Reductions</a></li>
  </ul></li>
  <li><a href="#qualitative-data" id="toc-qualitative-data" class="nav-link" data-scroll-target="#qualitative-data"><span class="header-section-number">1.4</span> Qualitative data</a>
  <ul class="collapse">
  <li><a href="#categorical" id="toc-categorical" class="nav-link" data-scroll-target="#categorical"><span class="header-section-number">1.4.1</span> Categorical</a></li>
  <li><a href="#text" id="toc-text" class="nav-link" data-scroll-target="#text"><span class="header-section-number">1.4.2</span> Text</a></li>
  <li><a href="#images" id="toc-images" class="nav-link" data-scroll-target="#images"><span class="header-section-number">1.4.3</span> Images</a></li>
  </ul></li>
  <li><a href="#working-in-pandas" id="toc-working-in-pandas" class="nav-link" data-scroll-target="#working-in-pandas"><span class="header-section-number">1.5</span> Working in pandas</a>
  <ul class="collapse">
  <li><a href="#series" id="toc-series" class="nav-link" data-scroll-target="#series"><span class="header-section-number">1.5.1</span> Series</a></li>
  <li><a href="#data-frames" id="toc-data-frames" class="nav-link" data-scroll-target="#data-frames"><span class="header-section-number">1.5.2</span> Data frames</a></li>
  <li><a href="#common-operations" id="toc-common-operations" class="nav-link" data-scroll-target="#common-operations"><span class="header-section-number">1.5.3</span> Common operations</a></li>
  <li><a href="#loading-from-files" id="toc-loading-from-files" class="nav-link" data-scroll-target="#loading-from-files"><span class="header-section-number">1.5.4</span> Loading from files</a></li>
  </ul></li>
  <li><a href="#selecting-rows-and-columns" id="toc-selecting-rows-and-columns" class="nav-link" data-scroll-target="#selecting-rows-and-columns"><span class="header-section-number">1.6</span> Selecting rows and columns</a></li>
  <li><a href="#combining-data-frames" id="toc-combining-data-frames" class="nav-link" data-scroll-target="#combining-data-frames"><span class="header-section-number">1.7</span> Combining data frames</a>
  <ul class="collapse">
  <li><a href="#concatenation" id="toc-concatenation" class="nav-link" data-scroll-target="#concatenation"><span class="header-section-number">1.7.1</span> Concatenation</a></li>
  <li><a href="#merging-data" id="toc-merging-data" class="nav-link" data-scroll-target="#merging-data"><span class="header-section-number">1.7.2</span> Merging data</a></li>
  </ul></li>
  <li><a href="#data-wrangling" id="toc-data-wrangling" class="nav-link" data-scroll-target="#data-wrangling"><span class="header-section-number">1.8</span> Data wrangling</a>
  <ul class="collapse">
  <li><a href="#missing-values" id="toc-missing-values" class="nav-link" data-scroll-target="#missing-values"><span class="header-section-number">1.8.1</span> Missing values</a></li>
  <li><a href="#strings" id="toc-strings" class="nav-link" data-scroll-target="#strings"><span class="header-section-number">1.8.2</span> Strings</a></li>
  <li><a href="#encoding-qualitative-data" id="toc-encoding-qualitative-data" class="nav-link" data-scroll-target="#encoding-qualitative-data"><span class="header-section-number">1.8.3</span> Encoding qualitative data</a></li>
  </ul></li>
  <li><a href="#exercises" id="toc-exercises" class="nav-link" data-scroll-target="#exercises">Exercises</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content page-columns page-full" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Representation of data</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<div class="hidden">
<p><span class="math display">\[
    \newcommand{\float}{\mathbb{F}}
    \newcommand{\real}{\mathbb{R}}
    \newcommand{\complex}{\mathbb{C}}
    \newcommand{\nat}{\mathbb{N}}
    \newcommand{\integer}{\mathbb{Z}}
    \newcommand{\bfa}{\mathbf{a}}
    \newcommand{\bfe}{\mathbf{e}}
    \newcommand{\bfh}{\mathbf{h}}
    \newcommand{\bfp}{\mathbf{p}}
    \newcommand{\bfq}{\mathbf{q}}
    \newcommand{\bfu}{\mathbf{u}}
    \newcommand{\bfv}{\mathbf{v}}
    \newcommand{\bfw}{\mathbf{w}}
    \newcommand{\bfx}{\mathbf{x}}
    \newcommand{\bfy}{\mathbf{y}}
    \newcommand{\bfz}{\mathbf{z}}
    \newcommand{\bfA}{\mathbf{A}}
    \newcommand{\bfW}{\mathbf{W}}
    \newcommand{\bfX}{\mathbf{X}}
    \newcommand{\bfzero}{\boldsymbol{0}}
    \newcommand{\bfmu}{\boldsymbol{\mu}}
    \newcommand{\TP}{\text{TP}}
    \newcommand{\TN}{\text{TN}}
    \newcommand{\FP}{\text{FP}}
    \newcommand{\FN}{\text{FN}}
    \newcommand{\rmn}[2]{\mathbb{R}^{#1 \times #2}}
    \newcommand{\dd}[2]{\frac{d #1}{d #2}}
    \newcommand{\pp}[2]{\frac{\partial #1}{\partial #2}}
    \newcommand{\norm}[1]{\left\lVert \mathstrut #1 \right\rVert}
    \newcommand{\abs}[1]{\left\lvert \mathstrut #1 \right\rvert}
    \newcommand{\twonorm}[1]{\norm{#1}_2}
    \newcommand{\onenorm}[1]{\norm{#1}_1}
    \newcommand{\infnorm}[1]{\norm{#1}_\infty}
    \newcommand{\innerprod}[2]{\langle #1,#2 \rangle}
    \newcommand{\pr}[1]{^{(#1)}}
    \newcommand{\diag}{\operatorname{diag}}
    \newcommand{\sign}{\operatorname{sign}}
    \newcommand{\dist}{\operatorname{dist}}
    \newcommand{\simil}{\operatorname{sim}}
    \newcommand{\ee}{\times 10^}
    \newcommand{\floor}[1]{\lfloor#1\rfloor}
    \newcommand{\argmin}{\operatorname{argmin}}
    \newcommand{\E}[1]{\operatorname{\mathbb{E}}\left[\mathstrut #1\right]}
    \newcommand{\Cov}{\operatorname{Cov}}
    \newcommand{\logit}{\operatorname{logit}}
\]</span></p>
</div>
<p>First we have to discuss how to represent data, both abstractly and in Python.</p>
<section id="quantitative-data" class="level2 page-columns page-full" data-number="1.1">
<h2 data-number="1.1" class="anchored" data-anchor-id="quantitative-data"><span class="header-section-number">1.1</span> Quantitative data</h2>
<div id="def-data-quantitative" class="theorem definition">
<p><span class="theorem-title"><strong>Definition 1.1</strong></span> A <strong>quantitative</strong> value is one that is numerical and supports meaningful comparison and arithmetic operations.</p>
</div>
<p>Quantitative data is further divided into <strong>continuous</strong> and <strong>discrete</strong> types. The difference is the same as between real numbers and integers.</p>
<div id="exm-data-quantitative" class="theorem example" data-chapter="1" data-description="Quantitative data" type="✍️">
<p><span class="theorem-title"><strong>Example 1.1</strong></span> Some continuous quantitative data sources:</p>
<ul>
<li>Temperature at noon at a given airport</li>
<li>Your height</li>
<li>Voltage across the terminals of a battery</li>
</ul>
<p>Examples of discrete quantitative data:</p>
<ul>
<li>The number of shoes you own</li>
<li>Number of people at a restaurant table</li>
<li>Score on an exam</li>
</ul>
</div>

<div class="no-row-height column-margin column-container"><div class="">
<div style="max-width:400px">
<div style="position:relative;padding-bottom:71.25%">
<iframe id="kaltura_player" src="https://cdnapisec.kaltura.com/p/2358381/sp/235838100/embedIframeJs/uiconf_id/43030021/partner_id/2358381?iframeembed=true&amp;playerId=kaltura_player&amp;entry_id=1_iur6b66n&amp;flashvars[streamerType]=auto&amp;flashvars[localizationCode]=en&amp;flashvars[sideBarContainer.plugin]=true&amp;flashvars[sideBarContainer.position]=left&amp;flashvars[sideBarContainer.clickToClose]=true&amp;flashvars[chapters.plugin]=true&amp;flashvars[chapters.layout]=vertical&amp;flashvars[chapters.thumbnailRotator]=false&amp;flashvars[streamSelector.plugin]=true&amp;flashvars[EmbedPlayer.SpinnerTarget]=videoHolder&amp;flashvars[dualScreen.plugin]=true&amp;flashvars[hotspots.plugin]=1&amp;flashvars[Kaltura.addCrossoriginToIframe]=true&amp;&amp;wid=1_xge4t7kj" width="400" height="285" allowfullscreen="" webkitallowfullscreen="" mozallowfullscreen="" allow="autoplay *; fullscreen *; encrypted-media *" sandbox="allow-downloads allow-forms allow-same-origin allow-scripts allow-top-navigation allow-pointer-lock allow-popups allow-modals allow-orientation-lock allow-popups-to-escape-sandbox allow-presentation allow-top-navigation-by-user-activation" frameborder="0" title="Example 1.1" style="position:absolute;top:0;left:0;width:100%;height:100%;border:0">
</iframe>
</div>
</div>
</div></div><div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Sometimes there may be room for interpretation or context. For example, the retail price of a gallon of milk might be regarded as discrete data, since it technically represents a whole number of pennies. But in finance, transactions are regularly computed to much higher precision, so it might make more sense to interpret prices as continuous values. As a rule of thumb, if there are many possible values, or the values are the result of a measurement, the continuous interpretation is usually more appropriate.</p>
</div>
</div>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Caution
</div>
</div>
<div class="callout-body-container callout-body">
<p>Not all numerical values represent truly quantitative data. ZIP codes (postal codes) in the U.S. are 5-digit numbers, and while there is some logic to how they were assigned, there is no clearly meaningful interpretation of averaging them, for instance.</p>
</div>
</div>
<p>For both continuous and discrete quantities, it makes sense to order different values, compute averages of them, etc. (However, averages of discrete quantities are continuous.)</p>
<p>Mathematically, the real and integer number sets are infinite, but computers are finite machines. Integers are represented exactly within some range that is determined by how many binary bits are dedicated. The computational analog of real numbers are <strong>floating-point numbers</strong>, or more simply, <strong>floats</strong>. These are bounded in range as well as discretized. The details are complicated, but essentially, the floating-point numbers have about 16 significant decimal digits by default—which is virtually always far more precision than real data offers.</p>
<div id="exm-data-float" class="theorem example" data-chapter="1" data-description="Floating-point numbers" type="💻">
<p><span class="theorem-title"><strong>Example 1.2</strong></span> if you enter an integer, it is interpreted as an <code>int</code>:</p>
<div id="66ddbbf2" class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># This is an integer (int type)</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="dv">3</span>, <span class="st">"is a"</span>, <span class="bu">type</span>(<span class="dv">3</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>3 is a &lt;class 'int'&gt;</code></pre>
</div>
</div>
<p>To get the floating-point version, you add a decimal point:</p>
<div id="269568ea" class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># This is a real number (float type)</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="fl">3.0</span>, <span class="st">"is a"</span>, <span class="bu">type</span>(<span class="fl">3.0</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>3.0 is a &lt;class 'float'&gt;</code></pre>
</div>
</div>
<p>You can also use scientific notation:</p>
<div id="b8c22d53" class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="fl">6.02e23</span>, <span class="st">"is Avogadro's number"</span>)</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="fl">6.62607e-34</span>, <span class="st">"is Planck's constant in Joule-seconds"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>6.02e+23 is Avogadro's number
6.62607e-34 is Planck's constant in Joule-seconds</code></pre>
</div>
</div>
<p>There are also explicit converter functions. The conversion of an <code>int</code> to a <code>float</code> is generally exact:</p>
<div id="51ee786e" class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert int to float (generally no change to numerical value)</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>( <span class="st">"float(3) creates"</span>,<span class="bu">float</span>(<span class="dv">3</span>) )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>float(3) creates 3.0</code></pre>
</div>
</div>
<p>But the conversion of <code>int</code> to <code>float</code> truncates the number, which can cause subtle bugs:</p>
<div id="017831a8" class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Truncate float to int</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>( <span class="st">"int(3.14) creates"</span>, <span class="bu">int</span>(<span class="fl">3.14</span>) )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>int(3.14) creates 3</code></pre>
</div>
</div>
<p>Because operations on floats are not exact, results can be surprising:</p>
<div id="2fd46dc8" class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="fl">0.2</span> <span class="op">-</span> <span class="fl">0.1</span> <span class="op">==</span> <span class="fl">0.1</span>)    <span class="co"># as expected</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="fl">3.1</span> <span class="op">-</span> <span class="fl">3.0</span> <span class="op">==</span> <span class="fl">0.1</span>)    <span class="co"># uh-oh</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>True
False</code></pre>
</div>
</div>
<p>The Numpy function <code>isclose</code> is a safer way to compare floats:</p>
<div id="ecf9b8b2" class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>( np.isclose(<span class="fl">3.1</span> <span class="op">-</span> <span class="fl">3.0</span>, <span class="fl">0.1</span>) )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>True</code></pre>
</div>
</div>
</div>

<div class="no-row-height column-margin column-container"><div class="">
<div style="max-width:304px">
<div style="position:relative;padding-bottom:75.986842105263%">
<iframe id="kaltura_player" src="https://cdnapisec.kaltura.com/p/2358381/sp/235838100/embedIframeJs/uiconf_id/43030021/partner_id/2358381?iframeembed=true&amp;playerId=kaltura_player&amp;entry_id=1_1ksfwja3&amp;flashvars[streamerType]=auto&amp;flashvars[localizationCode]=en&amp;flashvars[sideBarContainer.plugin]=true&amp;flashvars[sideBarContainer.position]=left&amp;flashvars[sideBarContainer.clickToClose]=true&amp;flashvars[chapters.plugin]=true&amp;flashvars[chapters.layout]=vertical&amp;flashvars[chapters.thumbnailRotator]=false&amp;flashvars[streamSelector.plugin]=true&amp;flashvars[EmbedPlayer.SpinnerTarget]=videoHolder&amp;flashvars[dualScreen.plugin]=true&amp;flashvars[hotspots.plugin]=1&amp;flashvars[Kaltura.addCrossoriginToIframe]=true&amp;&amp;wid=1_k1vhj9q5" width="304" height="231" allowfullscreen="" webkitallowfullscreen="" mozallowfullscreen="" allow="autoplay *; fullscreen *; encrypted-media *" sandbox="allow-downloads allow-forms allow-same-origin allow-scripts allow-top-navigation allow-pointer-lock allow-popups allow-modals allow-orientation-lock allow-popups-to-escape-sandbox allow-presentation allow-top-navigation-by-user-activation" frameborder="0" title="Example 1.2" style="position:absolute;top:0;left:0;width:100%;height:100%;border:0">
</iframe>
</div>
</div>
<p><br><br> <a href="_media/memes/float_goat.jpg" class="lightbox" data-gallery="quarto-lightbox-gallery-1"><img src="_media/memes/float_goat.jpg" class="img-fluid quarto-figure quarto-figure-center" width="200"></a></p>
</div></div><div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Warning
</div>
</div>
<div class="callout-body-container callout-body">
<p>Be careful about comparing floating-point values. Exact comparisons may fail due to rounding errors.</p>
</div>
</div>
<section id="inf-and-nan" class="level3 page-columns page-full" data-number="1.1.1">
<h3 data-number="1.1.1" class="anchored" data-anchor-id="inf-and-nan"><span class="header-section-number">1.1.1</span> Inf and NaN</h3>
<p>There are two additional quasi-numerical <code>float</code> values to be aware of as well.</p>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p>For numerical work in Python, the NumPy package indispensible. We will use it often, and it is also loaded and used by most other scientifically oriented packages.</p>
</div>
</div>
<p>The value <code>inf</code> in NumPy stands for infinity.</p>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Warning
</div>
</div>
<div class="callout-body-container callout-body">
<p>By definition, every operation that involves a <code>NaN</code> value results in a <code>NaN</code>.</p>
</div>
</div>
<div id="exm-data-inf-nan" class="theorem example" data-chapter="1" data-description="Infinity and NaN" type="💻">
<p><span class="theorem-title"><strong>Example 1.3</strong></span> Infinity is greater than every number, and some arithmetic operations with infinity are well defined:</p>
<div id="7bf978ee" class="cell" data-execution_count="9">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>( <span class="st">"(np.inf + 5) is"</span>, np.inf <span class="op">+</span> <span class="dv">5</span> )</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>( <span class="st">"(np.inf + np.inf) is"</span>, np.inf <span class="op">+</span> np.inf )</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>( <span class="st">"(5 - np.inf) is"</span>, <span class="dv">5</span> <span class="op">-</span> np.inf )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>(np.inf + 5) is inf
(np.inf + np.inf) is inf
(5 - np.inf) is -inf</code></pre>
</div>
</div>
<p>However, in calculus you learned that some expressions with infinity are considered to be undefined without additional information (e.g., L’Hôpital’s Rule):</p>
<div id="9e53576b" class="cell" data-execution_count="10">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>( <span class="st">"np.inf / np.inf is"</span>, np.inf <span class="op">/</span> np.inf )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>np.inf / np.inf is nan</code></pre>
</div>
</div>
<p>The result <code>nan</code> above stands for <em>Not a Number</em>. It is the result of indeterminate arithmetic operations, like <span class="math inline">\(\infty/\infty\)</span> and <span class="math inline">\(\infty - \infty\)</span>. It is also used sometimes as a placeholder for missing data.</p>
<p>One notorious trap of using NaN is that <code>nan==nan</code> is not <code>True</code>!</p>
<div id="f4ca91b6" class="cell" data-execution_count="11">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>( <span class="st">"np.nan == np.nan is"</span>, np.nan <span class="op">==</span> np.nan )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>np.nan == np.nan is False</code></pre>
</div>
</div>
<p>Instead, you should use <code>np.isnan</code> to check for <code>NaN</code> values:</p>
<div id="f2cfb353" class="cell" data-execution_count="12">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>( <span class="st">"np.isnan(np.nan) is"</span>, np.isnan(np.nan) )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>np.isnan(np.nan) is True</code></pre>
</div>
</div>
</div>

<div class="no-row-height column-margin column-container"><div class="">
<div style="max-width:304px">
<div style="position:relative;padding-bottom:75.986842105263%">
<iframe id="kaltura_player" src="https://cdnapisec.kaltura.com/p/2358381/sp/235838100/embedIframeJs/uiconf_id/43030021/partner_id/2358381?iframeembed=true&amp;playerId=kaltura_player&amp;entry_id=1_nyqbc6h9&amp;flashvars[streamerType]=auto&amp;flashvars[localizationCode]=en&amp;flashvars[sideBarContainer.plugin]=true&amp;flashvars[sideBarContainer.position]=left&amp;flashvars[sideBarContainer.clickToClose]=true&amp;flashvars[chapters.plugin]=true&amp;flashvars[chapters.layout]=vertical&amp;flashvars[chapters.thumbnailRotator]=false&amp;flashvars[streamSelector.plugin]=true&amp;flashvars[EmbedPlayer.SpinnerTarget]=videoHolder&amp;flashvars[dualScreen.plugin]=true&amp;flashvars[hotspots.plugin]=1&amp;flashvars[Kaltura.addCrossoriginToIframe]=true&amp;&amp;wid=1_8zmeafud" width="304" height="231" allowfullscreen="" webkitallowfullscreen="" mozallowfullscreen="" allow="autoplay *; fullscreen *; encrypted-media *" sandbox="allow-downloads allow-forms allow-same-origin allow-scripts allow-top-navigation allow-pointer-lock allow-popups allow-modals allow-orientation-lock allow-popups-to-escape-sandbox allow-presentation allow-top-navigation-by-user-activation" frameborder="0" title="Example 1.3" style="position:absolute;top:0;left:0;width:100%;height:100%;border:0">
</iframe>
</div>
</div>
</div></div></section>
<section id="dates-and-times" class="level3" data-number="1.1.2">
<h3 data-number="1.1.2" class="anchored" data-anchor-id="dates-and-times"><span class="header-section-number">1.1.2</span> Dates and times</h3>
<p>Handling times and dates can be tricky. Aside from headaches such as time zones and leap years, there are many different ways people and machines represent dates, and with varying amounts of precision. Python has its own inbuilt system for handling dates and times, but we will show the facilities provided by the NumPy package, which is more comprehensive.</p>
<p>There are two basic types:</p>
<div id="def-data-time" class="theorem definition">
<p><span class="theorem-title"><strong>Definition 1.2</strong></span> A <strong>datetime</strong> is a representation of an instant in time. A <strong>time delta</strong> is a representation of a duration; i.e., a difference between two datetimes.</p>
</div>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p>Native Python uses a <code>datetime</code> type, while NumPy uses <code>datetime64</code>.</p>
</div>
</div>
<div id="exm-data-datetime" class="theorem example" data-chapter="1" data-description="Dates and times in NumPy" type="💻">
<p><span class="theorem-title"><strong>Example 1.4</strong></span> You can use many natural date formats within strings:</p>
<div id="09dbc3c5" class="cell" data-execution_count="13">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>np.datetime64(<span class="st">"2020-01-17"</span>)    <span class="co"># YYYY-MM-DD </span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>np.datetime64(<span class="st">"1969-07-20T20:17"</span>)    <span class="co"># YYYY-MM-DDThh:mm</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="12">
<pre><code>numpy.datetime64('1969-07-20T20:17')</code></pre>
</div>
</div>
<div id="80137688" class="cell" data-execution_count="14">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Current date and time, down to the second</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>np.datetime64(<span class="st">"now"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="13">
<pre><code>numpy.datetime64('2024-09-13T18:16:39')</code></pre>
</div>
</div>
<p>A time delta in NumPy indicates its units (i. e., its granularity).</p>
<div id="4b2a83d4" class="cell" data-execution_count="15">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>np.datetime64(<span class="st">"1969-07-20T20:17"</span>) <span class="op">-</span> np.datetime64(<span class="st">"today"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="14">
<pre><code>numpy.timedelta64(-29006143,'m')</code></pre>
</div>
</div>
</div>
</section>
</section>
<section id="vectors" class="level2 page-columns page-full" data-number="1.2">
<h2 data-number="1.2" class="anchored" data-anchor-id="vectors"><span class="header-section-number">1.2</span> Vectors</h2>
<p>Most interesting phenomena are characterized and influenced by more than one factor. Collections of values therefore play a central role in data science. The workhorse type for collections in base Python is the list. However, we’re going to need some more powerful metaphors and tools as well, beginning with vectors.</p>
<div id="def-data-vector" class="theorem definition">
<p><span class="theorem-title"><strong>Definition 1.3</strong></span> A <strong>vector</strong> is a collection of values called <strong>elements</strong>, all of the same type, indexed by consecutive integers.</p>
</div>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p>In math, vector indexes usually begin with 1. In Python, they begin with 0.</p>
</div>
</div>
<p>A vector with <span class="math inline">\(n\)</span> elements is often referred to as an <span class="math inline">\(n\)</span>-vector, and we say that <span class="math inline">\(n\)</span> is the <strong>length</strong> of the vector. In math we often use <span class="math inline">\(\real^n\)</span> to denote the set of all <span class="math inline">\(n\)</span>-vectors with real-valued elements.</p>
<div id="exm-data-vector" class="theorem example" data-chapter="1" data-description="Vectors in Python" type="💻">
<p><span class="theorem-title"><strong>Example 1.5</strong></span> The usual way to work with vectors in Python is through NumPy:</p>
<div id="c1896c5c" class="cell" data-execution_count="16">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> np.array( [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>] )</span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>x</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="15">
<pre><code>array([1, 2, 3, 4, 5])</code></pre>
</div>
</div>
<p>A vector has a data type for its elements:</p>
<div id="2fe2bf00" class="cell" data-execution_count="17">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>x.dtype</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="16">
<pre><code>dtype('int64')</code></pre>
</div>
</div>
<p>Any float values in the vector cause the data type of the entire vector to be <code>float</code>:</p>
<div id="b6e1066a" class="cell" data-execution_count="18">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>y <span class="op">=</span> np.array( [<span class="fl">1.0</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>] )</span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>y.dtype</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="17">
<pre><code>dtype('float64')</code></pre>
</div>
</div>
<p>Use <code>len</code> to determine the length of a vector:</p>
<div id="16743d19" class="cell" data-execution_count="19">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="bu">len</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="18">
<pre><code>5</code></pre>
</div>
</div>
<p>You can create a special type of vector called a <em>range</em> that has equally spaced elements:</p>
<div id="8a9ad331" class="cell" data-execution_count="20">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>np.arange(<span class="dv">0</span>, <span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="19">
<pre><code>array([0, 1, 2, 3, 4])</code></pre>
</div>
</div>
<div id="7b6be80b" class="cell" data-execution_count="21">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>np.arange(<span class="dv">1</span>, <span class="dv">3</span>, <span class="fl">0.5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="20">
<pre><code>array([1. , 1.5, 2. , 2.5])</code></pre>
</div>
</div>
<p>The syntax here is <code>(start,stop,step)</code>.</p>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Caution
</div>
</div>
<div class="callout-body-container callout-body">
<p>In base Python and in NumPy, the last element of a range is omitted. This is guaranteed to cause confusion if you are used to just about any other computer language.</p>
</div>
</div>
<p>There are functions for creating vectors of ones and zeros:</p>
<div id="3cbcf060" class="cell" data-execution_count="22">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(np.ones(<span class="dv">5</span>))</span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(np.zeros(<span class="dv">4</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1. 1. 1. 1. 1.]
[0. 0. 0. 0.]</code></pre>
</div>
</div>
</div>

<div class="no-row-height column-margin column-container"><div class="">
<div style="max-width:304px">
<div style="position:relative;padding-bottom:75.986842105263%">
<iframe id="kaltura_player" src="https://cdnapisec.kaltura.com/p/2358381/sp/235838100/embedIframeJs/uiconf_id/43030021/partner_id/2358381?iframeembed=true&amp;playerId=kaltura_player&amp;entry_id=1_g0hda6xi&amp;flashvars[streamerType]=auto&amp;flashvars[localizationCode]=en&amp;flashvars[sideBarContainer.plugin]=true&amp;flashvars[sideBarContainer.position]=left&amp;flashvars[sideBarContainer.clickToClose]=true&amp;flashvars[chapters.plugin]=true&amp;flashvars[chapters.layout]=vertical&amp;flashvars[chapters.thumbnailRotator]=false&amp;flashvars[streamSelector.plugin]=true&amp;flashvars[EmbedPlayer.SpinnerTarget]=videoHolder&amp;flashvars[dualScreen.plugin]=true&amp;flashvars[hotspots.plugin]=1&amp;flashvars[Kaltura.addCrossoriginToIframe]=true&amp;&amp;wid=1_tryruqu5" width="304" height="231" allowfullscreen="" webkitallowfullscreen="" mozallowfullscreen="" allow="autoplay *; fullscreen *; encrypted-media *" sandbox="allow-downloads allow-forms allow-same-origin allow-scripts allow-top-navigation allow-pointer-lock allow-popups allow-modals allow-orientation-lock allow-popups-to-escape-sandbox allow-presentation allow-top-navigation-by-user-activation" frameborder="0" title="Example 1.5" style="position:absolute;top:0;left:0;width:100%;height:100%;border:0">
</iframe>
</div>
</div>
<p><br><br> <a href="_media/memes/vectored.jpg" class="lightbox" data-gallery="quarto-lightbox-gallery-2"><img src="_media/memes/vectored.jpg" class="img-fluid quarto-figure quarto-figure-center" width="200"></a></p>
</div></div><section id="element-access" class="level3 page-columns page-full" data-number="1.2.1">
<h3 data-number="1.2.1" class="anchored" data-anchor-id="element-access"><span class="header-section-number">1.2.1</span> Element access</h3>
<p>The elements of a vector can be accessed directly using square brackets notation.</p>
<div id="exm-data-access" class="theorem example" data-chapter="1" data-description="Accessing vector elements" type="💻">
<p><span class="theorem-title"><strong>Example 1.6</strong></span> Use square brackets to refer to an element of a vector, remembering that the first element has index 0:</p>
<div id="ddb8b610" class="cell" data-execution_count="23">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>x[<span class="dv">0</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="22">
<pre><code>1</code></pre>
</div>
</div>
<div id="fa9a3928" class="cell" data-execution_count="24">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>x[<span class="dv">4</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="23">
<pre><code>5</code></pre>
</div>
</div>
<p>Negative values for the index are counted from the end. The last element of a vector always has index <code>-1</code>, and more-negative values move backward through the elements:</p>
<div id="6c2d1727" class="cell" data-execution_count="25">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>x[<span class="op">-</span><span class="dv">1</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="24">
<pre><code>5</code></pre>
</div>
</div>
<div id="b2a0a4f4" class="cell" data-execution_count="26">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>x[<span class="op">-</span><span class="dv">3</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="25">
<pre><code>3</code></pre>
</div>
</div>
<div id="ce81da1b" class="cell" data-execution_count="27">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a>x[<span class="op">-</span><span class="bu">len</span>(x)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="26">
<pre><code>1</code></pre>
</div>
</div>
<p>Element references can also be on the left side of an assignment:</p>
<div id="1693a167" class="cell" data-execution_count="28">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a>x[<span class="dv">2</span>] <span class="op">=</span> <span class="op">-</span><span class="dv">3</span></span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a>x</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="27">
<pre><code>array([ 1,  2, -3,  4,  5])</code></pre>
</div>
</div>
<p>Note, however, that once the data type of a vector is set, it can’t be changed:</p>
<div id="fd654c0d" class="cell" data-execution_count="29">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a>x[<span class="dv">0</span>] <span class="op">=</span> <span class="fl">1.234</span></span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a>x    <span class="co"># float was truncated to int, without warning!!!</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="28">
<pre><code>array([ 1,  2, -3,  4,  5])</code></pre>
</div>
</div>
<p>You can also use a list in square brackets to access multiple elements at once:</p>
<div id="cbac041f" class="cell" data-execution_count="30">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a>x[ [<span class="dv">0</span>, <span class="dv">2</span>, <span class="dv">4</span>] ]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="29">
<pre><code>array([ 1, -3,  5])</code></pre>
</div>
</div>
<p>The result of a list reference is a new vector, not a number. Note the difference here:</p>
<div id="144535b5" class="cell" data-execution_count="31">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a>x[<span class="dv">0</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="30">
<pre><code>1</code></pre>
</div>
</div>
<div id="a3903b9b" class="cell" data-execution_count="32">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>x[ [<span class="dv">0</span>] ]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="31">
<pre><code>array([1])</code></pre>
</div>
</div>
</div>

<div class="no-row-height column-margin column-container"><div class="">
<div style="max-width:304px">
<div style="position:relative;padding-bottom:75.986842105263%">
<iframe id="kaltura_player" src="https://cdnapisec.kaltura.com/p/2358381/sp/235838100/embedIframeJs/uiconf_id/43030021/partner_id/2358381?iframeembed=true&amp;playerId=kaltura_player&amp;entry_id=1_f06t1pv6&amp;flashvars[streamerType]=auto&amp;flashvars[localizationCode]=en&amp;flashvars[sideBarContainer.plugin]=true&amp;flashvars[sideBarContainer.position]=left&amp;flashvars[sideBarContainer.clickToClose]=true&amp;flashvars[chapters.plugin]=true&amp;flashvars[chapters.layout]=vertical&amp;flashvars[chapters.thumbnailRotator]=false&amp;flashvars[streamSelector.plugin]=true&amp;flashvars[EmbedPlayer.SpinnerTarget]=videoHolder&amp;flashvars[dualScreen.plugin]=true&amp;flashvars[hotspots.plugin]=1&amp;flashvars[Kaltura.addCrossoriginToIframe]=true&amp;&amp;wid=1_lch4gsfq" width="304" height="231" allowfullscreen="" webkitallowfullscreen="" mozallowfullscreen="" allow="autoplay *; fullscreen *; encrypted-media *" sandbox="allow-downloads allow-forms allow-same-origin allow-scripts allow-top-navigation allow-pointer-lock allow-popups allow-modals allow-orientation-lock allow-popups-to-escape-sandbox allow-presentation allow-top-navigation-by-user-activation" frameborder="0" title="Example 1.6" style="position:absolute;top:0;left:0;width:100%;height:100%;border:0">
</iframe>
</div>
</div>
</div></div></section>
<section id="slicing" class="level3 page-columns page-full" data-number="1.2.2">
<h3 data-number="1.2.2" class="anchored" data-anchor-id="slicing"><span class="header-section-number">1.2.2</span> Slicing</h3>
<p>You can also access multiple elements of a vector by using a list or range as the index. In the latter case, this is called <strong>slicing</strong>.</p>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Warning
</div>
</div>
<div class="callout-body-container callout-body">
<p>As with ranges in base Python, the last element of a slice range is omitted. This causes many headaches and bugs.</p>
</div>
</div>
<div id="exm-data-slice" class="theorem example" data-chapter="1" data-description="Slicing vectors" type="💻">
<p><span class="theorem-title"><strong>Example 1.7</strong></span> The syntax of a slice is <code>start:stop</code>.</p>
<div id="63af90b9" class="cell" data-execution_count="33">
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(x[<span class="dv">0</span>:<span class="dv">3</span>])</span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(x[<span class="op">-</span><span class="dv">3</span>:<span class="op">-</span><span class="dv">1</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[ 1  2 -3]
[-3  4]</code></pre>
</div>
</div>
<p>If you want to use a range that skips over elements, you can use a third argument in the form <code>start:stop:step</code>:</p>
<div id="668c4d0c" class="cell" data-execution_count="34">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a>x[<span class="dv">0</span>:<span class="dv">2</span>:<span class="dv">5</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="33">
<pre><code>array([1])</code></pre>
</div>
</div>
<p>When the <code>start</code> of the range is omitted, it means “from the beginning”, and when <code>stop</code> is omitted, it means “through to the end.” Hence, <code>[:k]</code> means “first <span class="math inline">\(k\)</span> elements” and <code>[-k:]</code> means “last <span class="math inline">\(k\)</span> elements”:</p>
<div id="6c5d0d95" class="cell" data-execution_count="35">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a>x[:<span class="dv">3</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="34">
<pre><code>array([ 1,  2, -3])</code></pre>
</div>
</div>
<div id="4140c8fb" class="cell" data-execution_count="36">
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a>x[<span class="op">-</span><span class="dv">3</span>:]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="35">
<pre><code>array([-3,  4,  5])</code></pre>
</div>
</div>
<p>And we also have this idiom:</p>
<div id="4fcf2e7b" class="cell" data-execution_count="37">
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a>x[::<span class="op">-</span><span class="dv">1</span>]   <span class="co"># reverse the vector</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="36">
<pre><code>array([ 5,  4, -3,  2,  1])</code></pre>
</div>
</div>
<p>NumPy will happily allow you to reference invalid indexes. It will just return as much as is available without warning or error:</p>
<div id="ce845edf" class="cell" data-execution_count="38">
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a>x[:<span class="dv">10</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="37">
<pre><code>array([ 1,  2, -3,  4,  5])</code></pre>
</div>
</div>
</div>

<div class="no-row-height column-margin column-container"><div class="">
<div style="max-width:304px">
<div style="position:relative;padding-bottom:75.986842105263%">
<iframe id="kaltura_player" src="https://cdnapisec.kaltura.com/p/2358381/sp/235838100/embedIframeJs/uiconf_id/43030021/partner_id/2358381?iframeembed=true&amp;playerId=kaltura_player&amp;entry_id=1_veepu3vo&amp;flashvars[streamerType]=auto&amp;flashvars[localizationCode]=en&amp;flashvars[sideBarContainer.plugin]=true&amp;flashvars[sideBarContainer.position]=left&amp;flashvars[sideBarContainer.clickToClose]=true&amp;flashvars[chapters.plugin]=true&amp;flashvars[chapters.layout]=vertical&amp;flashvars[chapters.thumbnailRotator]=false&amp;flashvars[streamSelector.plugin]=true&amp;flashvars[EmbedPlayer.SpinnerTarget]=videoHolder&amp;flashvars[dualScreen.plugin]=true&amp;flashvars[hotspots.plugin]=1&amp;flashvars[Kaltura.addCrossoriginToIframe]=true&amp;&amp;wid=1_j1bs7x12" width="304" height="231" allowfullscreen="" webkitallowfullscreen="" mozallowfullscreen="" allow="autoplay *; fullscreen *; encrypted-media *" sandbox="allow-downloads allow-forms allow-same-origin allow-scripts allow-top-navigation allow-pointer-lock allow-popups allow-modals allow-orientation-lock allow-popups-to-escape-sandbox allow-presentation allow-top-navigation-by-user-activation" frameborder="0" title="Example 1.7" style="position:absolute;top:0;left:0;width:100%;height:100%;border:0">
</iframe>
</div>
</div>
</div></div></section>
</section>
<section id="arrays" class="level2 page-columns page-full" data-number="1.3">
<h2 data-number="1.3" class="anchored" data-anchor-id="arrays"><span class="header-section-number">1.3</span> Arrays</h2>
<p>A vector is a special case of a more general construct.</p>
<div id="def-data-array" class="theorem definition">
<p><span class="theorem-title"><strong>Definition 1.4</strong></span> An <strong>array</strong> is a collection of values called <strong>elements</strong>, all of the same type, indexed by one or more sets of consecutive integers. The number of indexes needed to specify a value is the <strong>dimension</strong> of the array.</p>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>A dimension is called an <code>axis</code> in NumPy and related packages.</p>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>The term <strong>matrix</strong> is often used simply to mean a 2D array. Technically, though, a matrix should have only numerical values, and matrices obey certain properties that make them important mathematical objects. These properties and their consequences are studied in linear algebra.</p>
</div>
</div>
<p>For us, arrays will mostly be the results of importing or working on data. But it’s occasionally useful to know how to build them from scratch.</p>
<div id="exm-data-array" class="theorem example" data-chapter="1" data-description="Arrays in Python" type="💻">
<p><span class="theorem-title"><strong>Example 1.8</strong></span> One way to construct an array is by a <strong>list comprehension</strong>:</p>
<div id="1d29a7e2" class="cell" data-execution_count="39">
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a>A <span class="op">=</span> np.array([ [j<span class="op">-</span>i <span class="cf">for</span> j <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">6</span>)] <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">4</span>) ])</span>
<span id="cb75-2"><a href="#cb75-2" aria-hidden="true" tabindex="-1"></a>A</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="38">
<pre><code>array([[ 0,  1,  2,  3,  4,  5],
       [-1,  0,  1,  2,  3,  4],
       [-2, -1,  0,  1,  2,  3],
       [-3, -2, -1,  0,  1,  2]])</code></pre>
</div>
</div>
<p>The <code>shape</code> of an array is what we would often call the <em>size</em>:</p>
<div id="84dccef4" class="cell" data-execution_count="40">
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a>A.shape</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="39">
<pre><code>(4, 6)</code></pre>
</div>
</div>
<p>There is no difference between a vector and a 1D array:</p>
<div id="4a834c68" class="cell" data-execution_count="41">
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a>x.shape</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="40">
<pre><code>(5,)</code></pre>
</div>
</div>
<p>There is also no difference between a 2D array and a vector of vectors giving the rows of the array.</p>
<div id="b1fbbd80" class="cell" data-execution_count="42">
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a>R <span class="op">=</span> np.array( [ [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>], [<span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>] ])</span>
<span id="cb81-2"><a href="#cb81-2" aria-hidden="true" tabindex="-1"></a>R</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="41">
<pre><code>array([[1, 2, 3],
       [4, 5, 6]])</code></pre>
</div>
</div>
<p>Here are some other common ways to construct arrays.</p>
<div id="2bd8a101" class="cell" data-execution_count="43">
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a>np.ones(<span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="42">
<pre><code>array([1., 1., 1., 1., 1.])</code></pre>
</div>
</div>
<div id="6c9dc1e9" class="cell" data-execution_count="44">
<div class="sourceCode cell-code" id="cb85"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a>np.zeros( (<span class="dv">3</span>, <span class="dv">6</span>) )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="43">
<pre><code>array([[0., 0., 0., 0., 0., 0.],
       [0., 0., 0., 0., 0., 0.],
       [0., 0., 0., 0., 0., 0.]])</code></pre>
</div>
</div>
<div id="88e72247" class="cell" data-execution_count="45">
<div class="sourceCode cell-code" id="cb87"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a>np.repeat(np.pi, <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="44">
<pre><code>array([3.14159265, 3.14159265, 3.14159265])</code></pre>
</div>
</div>
<p>You can also stack arrays vertically or horizontally to create new arrays.</p>
<div id="3e85d46d" class="cell" data-execution_count="46">
<div class="sourceCode cell-code" id="cb89"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a>np.hstack( ( np.ones((<span class="dv">2</span>, <span class="dv">2</span>)), np.zeros((<span class="dv">2</span>, <span class="dv">3</span>)) ) )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="45">
<pre><code>array([[1., 1., 0., 0., 0.],
       [1., 1., 0., 0., 0.]])</code></pre>
</div>
</div>
<div id="eaed6920" class="cell" data-execution_count="47">
<div class="sourceCode cell-code" id="cb91"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a>np.vstack( (<span class="bu">range</span>(<span class="dv">5</span>), <span class="bu">range</span>(<span class="dv">5</span>, <span class="dv">0</span>, <span class="op">-</span><span class="dv">1</span>)) )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="46">
<pre><code>array([[0, 1, 2, 3, 4],
       [5, 4, 3, 2, 1]])</code></pre>
</div>
</div>
</div>

<div class="no-row-height column-margin column-container"><div class="">
<div style="max-width:304px">
<div style="position:relative;padding-bottom:75.986842105263%">
<iframe id="kaltura_player" src="https://cdnapisec.kaltura.com/p/2358381/sp/235838100/embedIframeJs/uiconf_id/43030021/partner_id/2358381?iframeembed=true&amp;playerId=kaltura_player&amp;entry_id=1_xqgr0oc8&amp;flashvars[streamerType]=auto&amp;flashvars[localizationCode]=en&amp;flashvars[sideBarContainer.plugin]=true&amp;flashvars[sideBarContainer.position]=left&amp;flashvars[sideBarContainer.clickToClose]=true&amp;flashvars[chapters.plugin]=true&amp;flashvars[chapters.layout]=vertical&amp;flashvars[chapters.thumbnailRotator]=false&amp;flashvars[streamSelector.plugin]=true&amp;flashvars[EmbedPlayer.SpinnerTarget]=videoHolder&amp;flashvars[dualScreen.plugin]=true&amp;flashvars[hotspots.plugin]=1&amp;flashvars[Kaltura.addCrossoriginToIframe]=true&amp;&amp;wid=1_ugy7sg7t" width="304" height="231" allowfullscreen="" webkitallowfullscreen="" mozallowfullscreen="" allow="autoplay *; fullscreen *; encrypted-media *" sandbox="allow-downloads allow-forms allow-same-origin allow-scripts allow-top-navigation allow-pointer-lock allow-popups allow-modals allow-orientation-lock allow-popups-to-escape-sandbox allow-presentation allow-top-navigation-by-user-activation" frameborder="0" title="Example 1.8" style="position:absolute;top:0;left:0;width:100%;height:100%;border:0">
</iframe>
</div>
</div>
</div></div><section id="indexing-and-slicing" class="level3 page-columns page-full" data-number="1.3.1">
<h3 data-number="1.3.1" class="anchored" data-anchor-id="indexing-and-slicing"><span class="header-section-number">1.3.1</span> Indexing and slicing</h3>
<p>One way to think about a 2D array is a vector of vector rows of the same length. That idea is reflected in NumPy syntax.</p>
<div id="exm-data-array-index" class="theorem example" data-chapter="1" data-description="Indexing arrays" type="💻">
<p><span class="theorem-title"><strong>Example 1.9</strong></span> We can use successive brackets to refer to an element, row then column:</p>
<div id="ccd7ba0e" class="cell" data-execution_count="48">
<div class="sourceCode cell-code" id="cb93"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a>R[<span class="dv">1</span>][<span class="dv">2</span>]    <span class="co"># second row, third column</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="47">
<pre><code>6</code></pre>
</div>
</div>
<p>It’s equivalent, and typically more convenient, to use a single bracket set with indexes separated by commas:</p>
<div id="253ebbb8" class="cell" data-execution_count="49">
<div class="sourceCode cell-code" id="cb95"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a>R[<span class="dv">1</span>, <span class="dv">2</span>]    <span class="co"># second row, third column</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="48">
<pre><code>6</code></pre>
</div>
</div>
<p>You can use slicing ranges in each dimension individually.</p>
<div id="3bf5836b" class="cell" data-execution_count="50">
<div class="sourceCode cell-code" id="cb97"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a>R[:<span class="dv">1</span>, <span class="op">-</span><span class="dv">2</span>:]    <span class="co"># first row, last two columns</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="49">
<pre><code>array([[2, 3]])</code></pre>
</div>
</div>
<p>The result above is another 2D array. Note how this result is subtly different:</p>
<div id="d1e52271" class="cell" data-execution_count="51">
<div class="sourceCode cell-code" id="cb99"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a>R[<span class="dv">0</span>, <span class="op">-</span><span class="dv">2</span>:]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="50">
<pre><code>array([2, 3])</code></pre>
</div>
</div>
<p>Because we accessed an individual row, not a slice, the result is one dimension lower—a vector. Finally, a <code>:</code> in one slice position means to keep everything in that dimension.</p>
<div id="16b002a6" class="cell" data-execution_count="52">
<div class="sourceCode cell-code" id="cb101"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a>A[:, :<span class="dv">2</span>]    <span class="co"># all rows, first 2 columns</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="51">
<pre><code>array([[ 0,  1],
       [-1,  0],
       [-2, -1],
       [-3, -2]])</code></pre>
</div>
</div>
</div>

<div class="no-row-height column-margin column-container"><div class="">
<div style="max-width:304px">
<div style="position:relative;padding-bottom:75.986842105263%">
<iframe id="kaltura_player" src="https://cdnapisec.kaltura.com/p/2358381/sp/235838100/embedIframeJs/uiconf_id/43030021/partner_id/2358381?iframeembed=true&amp;playerId=kaltura_player&amp;entry_id=1_nhk4pa65&amp;flashvars[streamerType]=auto&amp;flashvars[localizationCode]=en&amp;flashvars[sideBarContainer.plugin]=true&amp;flashvars[sideBarContainer.position]=left&amp;flashvars[sideBarContainer.clickToClose]=true&amp;flashvars[chapters.plugin]=true&amp;flashvars[chapters.layout]=vertical&amp;flashvars[chapters.thumbnailRotator]=false&amp;flashvars[streamSelector.plugin]=true&amp;flashvars[EmbedPlayer.SpinnerTarget]=videoHolder&amp;flashvars[dualScreen.plugin]=true&amp;flashvars[hotspots.plugin]=1&amp;flashvars[Kaltura.addCrossoriginToIframe]=true&amp;&amp;wid=1_ns9347ku" width="304" height="231" allowfullscreen="" webkitallowfullscreen="" mozallowfullscreen="" allow="autoplay *; fullscreen *; encrypted-media *" sandbox="allow-downloads allow-forms allow-same-origin allow-scripts allow-top-navigation allow-pointer-lock allow-popups allow-modals allow-orientation-lock allow-popups-to-escape-sandbox allow-presentation allow-top-navigation-by-user-activation" frameborder="0" title="Example 1.9" style="position:absolute;top:0;left:0;width:100%;height:100%;border:0">
</iframe>
</div>
</div>
<p><br><br></p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="_media/memes/slicing.jpg" class="lightbox" data-gallery="quarto-lightbox-gallery-3"><img src="_media/memes/slicing.jpg" class="img-fluid quarto-figure quarto-figure-center figure-img" width="200"></a></p>
</figure>
</div>
</div></div></section>
<section id="reductions" class="level3 page-columns page-full" data-number="1.3.2">
<h3 data-number="1.3.2" class="anchored" data-anchor-id="reductions"><span class="header-section-number">1.3.2</span> Reductions</h3>
<p>A common task is to <strong>reduce</strong> an array along one dimension, called an <em>axis</em> in numpy, resulting in an array of one less dimension.</p>
<div id="exm-data-array-reduce" class="theorem example" data-chapter="1" data-description="Array reductions" type="💻">
<p><span class="theorem-title"><strong>Example 1.10</strong></span> The first dimension of an array is axis number 0, the second is axis number 1, etc.</p>
<div id="bba0090e" class="cell" data-execution_count="53">
<div class="sourceCode cell-code" id="cb103"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a>A</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="52">
<pre><code>array([[ 0,  1,  2,  3,  4,  5],
       [-1,  0,  1,  2,  3,  4],
       [-2, -1,  0,  1,  2,  3],
       [-3, -2, -1,  0,  1,  2]])</code></pre>
</div>
</div>
<div id="86b96453" class="cell" data-execution_count="54">
<div class="sourceCode cell-code" id="cb105"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb105-1"><a href="#cb105-1" aria-hidden="true" tabindex="-1"></a>np.<span class="bu">sum</span>(A, axis<span class="op">=</span><span class="dv">0</span>)    <span class="co"># sum along the rows</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="53">
<pre><code>array([-6, -2,  2,  6, 10, 14])</code></pre>
</div>
</div>
<p>Even when we sum along the column dimension, <code>axis=1</code>, the result is a vector that we would interpret as a row, not a column.</p>
<div id="b27b0f40" class="cell" data-execution_count="55">
<div class="sourceCode cell-code" id="cb107"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb107-1"><a href="#cb107-1" aria-hidden="true" tabindex="-1"></a>np.<span class="bu">sum</span>(A, axis<span class="op">=</span><span class="dv">1</span>)    <span class="co"># sum along the columns</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="54">
<pre><code>array([15,  9,  3, -3])</code></pre>
</div>
</div>
<p>If you don’t specify an axis, the reduction occurs over all dimensions at once, resulting in a single number.</p>
<div id="4c213b05" class="cell" data-execution_count="56">
<div class="sourceCode cell-code" id="cb109"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb109-1"><a href="#cb109-1" aria-hidden="true" tabindex="-1"></a>np.<span class="bu">sum</span>(A)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="55">
<pre><code>24</code></pre>
</div>
</div>
</div>

<div class="no-row-height column-margin column-container"><div class="">
<div style="max-width:304px">
<div style="position:relative;padding-bottom:75.986842105263%">
<iframe id="kaltura_player" src="https://cdnapisec.kaltura.com/p/2358381/sp/235838100/embedIframeJs/uiconf_id/43030021/partner_id/2358381?iframeembed=true&amp;playerId=kaltura_player&amp;entry_id=1_sb1cwatu&amp;flashvars[streamerType]=auto&amp;flashvars[localizationCode]=en&amp;flashvars[sideBarContainer.plugin]=true&amp;flashvars[sideBarContainer.position]=left&amp;flashvars[sideBarContainer.clickToClose]=true&amp;flashvars[chapters.plugin]=true&amp;flashvars[chapters.layout]=vertical&amp;flashvars[chapters.thumbnailRotator]=false&amp;flashvars[streamSelector.plugin]=true&amp;flashvars[EmbedPlayer.SpinnerTarget]=videoHolder&amp;flashvars[dualScreen.plugin]=true&amp;flashvars[hotspots.plugin]=1&amp;flashvars[Kaltura.addCrossoriginToIframe]=true&amp;&amp;wid=1_vnc91q62" width="304" height="231" allowfullscreen="" webkitallowfullscreen="" mozallowfullscreen="" allow="autoplay *; fullscreen *; encrypted-media *" sandbox="allow-downloads allow-forms allow-same-origin allow-scripts allow-top-navigation allow-pointer-lock allow-popups allow-modals allow-orientation-lock allow-popups-to-escape-sandbox allow-presentation allow-top-navigation-by-user-activation" frameborder="0" title="Example 1.10" style="position:absolute;top:0;left:0;width:100%;height:100%;border:0">
</iframe>
</div>
</div>
<p><br><br></p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="_media/memes/reduced.jpg" class="lightbox" data-gallery="quarto-lightbox-gallery-4"><img src="_media/memes/reduced.jpg" class="img-fluid quarto-figure quarto-figure-center figure-img" width="200"></a></p>
</figure>
</div>
</div></div><div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>You can also do reductions with <code>np.max</code>, <code>np.min</code>, <code>np.mean</code>, etc.</p>
</div>
</div>
</section>
</section>
<section id="qualitative-data" class="level2 page-columns page-full" data-number="1.4">
<h2 data-number="1.4" class="anchored" data-anchor-id="qualitative-data"><span class="header-section-number">1.4</span> Qualitative data</h2>
<p>A qualitative value is one that is not quantitative. There are numerous types, but we will consider only a few of them here. Ultimately, we need to be able to represent qualitative data in a quantitative way for use in algorithms.</p>
<section id="categorical" class="level3 page-columns page-full" data-number="1.4.1">
<h3 data-number="1.4.1" class="anchored" data-anchor-id="categorical"><span class="header-section-number">1.4.1</span> Categorical</h3>
<div id="def-data-categorical" class="theorem definition">
<p><span class="theorem-title"><strong>Definition 1.5</strong></span> <strong>Categorical</strong> data has values drawn from a finite set <span class="math inline">\(S\)</span> of categories. If the members of <span class="math inline">\(S\)</span> support meaningful ordering comparisons, then the data is <strong>ordinal</strong>; otherwise, it is <strong>nominal</strong>.</p>
</div>
<div id="exm-data-categorical" class="theorem example" data-chapter="1" data-description="Ordinal data" type="✍️">
<p><span class="theorem-title"><strong>Example 1.11</strong></span> Examples of ordinal categorical data:</p>
<ul>
<li>Seat classes on a commercial airplane (e.g., economy, business, first)</li>
<li>Letters of the alphabet</li>
</ul>
<p>Examples of nominal categorical data:</p>
<ul>
<li>Yes/No responses</li>
<li>Marital status</li>
<li>Make of a car</li>
</ul>
<p>There are nuanced cases. For instance, letter grades are themselves ordinal categorical data. However, schools convert them to discrete quantitative data and then compute a continuous quantitative GPA.</p>
</div>
<p>One way to quantify ordinal categorical data is to assign integer values to the categories in a manner that preserves ordering. This approach can be suspect, though, when it comes to operations such as averaging or computing a distance between values.</p>
<section id="dummy-variables" class="level4 page-columns page-full" data-number="1.4.1.1">
<h4 data-number="1.4.1.1" class="anchored" data-anchor-id="dummy-variables"><span class="header-section-number">1.4.1.1</span> Dummy variables</h4>
<p>Another means of quantifying categorical data is called <strong>dummy variables</strong> in classical statistics and <strong>one-hot encoding</strong> in much of machine learning. Suppose a variable <span class="math inline">\(x\)</span> has values in a category set that has <span class="math inline">\(m\)</span> members, i. e., <span class="math inline">\(S = \{c_1,\ldots,c_m\}\)</span>. There are two ways to replace the values with dummy variables.</p>
<ol type="1">
<li>Introduce <span class="math inline">\(m\)</span> variables <span class="math inline">\(x_1,\ldots,x_m\)</span>, where for a given categorical value <span class="math inline">\(v\)</span> we have</li>
</ol>
<p><span class="math display">\[
x_i = \begin{cases} 1, &amp; v = c_i, \\ 0, &amp; v \neq c_i. \end{cases}
\]</span></p>
<ol start="2" type="1">
<li>Introduce only <span class="math inline">\(m-1\)</span> variables, leaving out <span class="math inline">\(x_m\)</span>. If <span class="math inline">\(x_1=x_2=\ldots=x_{m-1}=0\)</span>, then we know that the value is <span class="math inline">\(c_m\)</span>. (This variant is important in statistics because otherwise, <span class="math inline">\(x_m\)</span> has to be correlated with the other <span class="math inline">\(x_i\)</span>.)</li>
</ol>
<div id="exm-data-dummy" class="theorem example" data-chapter="1" data-description="Dummy variables" type="✍️">
<p><span class="theorem-title"><strong>Example 1.12</strong></span> Suppose that the <em>stooge</em> variable can take the values <code>Moe</code>, <code>Larry</code>, <code>Curly</code>, or <code>Shemp</code>, and we have the dataset</p>
<div id="c1e64491" class="cell" data-execution_count="57">
<div class="sourceCode cell-code" id="cb111"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb111-1"><a href="#cb111-1" aria-hidden="true" tabindex="-1"></a>[<span class="st">"Curly"</span>, <span class="st">"Moe"</span>, <span class="st">"Curly"</span>, <span class="st">"Larry"</span>, <span class="st">"Shemp"</span>, <span class="st">"Moe"</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="56">
<pre><code>['Curly', 'Moe', 'Curly', 'Larry', 'Shemp', 'Moe']</code></pre>
</div>
</div>
<p>If we use 4 dummy variables, the data would be replaced by the array</p>
<div id="975be742" class="cell" data-execution_count="58">
<div class="cell-output cell-output-display" data-execution_count="57">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Curly</th>
<th data-quarto-table-cell-role="th">Larry</th>
<th data-quarto-table-cell-role="th">Moe</th>
<th data-quarto-table-cell-role="th">Shemp</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>True</td>
<td>False</td>
<td>False</td>
<td>False</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>False</td>
<td>False</td>
<td>True</td>
<td>False</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>True</td>
<td>False</td>
<td>False</td>
<td>False</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>False</td>
<td>True</td>
<td>False</td>
<td>False</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>False</td>
<td>False</td>
<td>False</td>
<td>True</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">5</td>
<td>False</td>
<td>False</td>
<td>True</td>
<td>False</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>If we use only 3 dummy variables, we would get</p>
<div id="50062de5" class="cell" data-execution_count="59">
<div class="cell-output cell-output-display" data-execution_count="58">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Larry</th>
<th data-quarto-table-cell-role="th">Moe</th>
<th data-quarto-table-cell-role="th">Shemp</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>False</td>
<td>False</td>
<td>False</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>False</td>
<td>True</td>
<td>False</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>False</td>
<td>False</td>
<td>False</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>True</td>
<td>False</td>
<td>False</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>False</td>
<td>False</td>
<td>True</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">5</td>
<td>False</td>
<td>True</td>
<td>False</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>The all-zero rows above correspond to the <code>Curly</code> values.</p>
</div>

<div class="no-row-height column-margin column-container"><div class="">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="_media/memes/dummies.jpg" class="lightbox" data-gallery="quarto-lightbox-gallery-5"><img src="_media/memes/dummies.jpg" class="img-fluid quarto-figure quarto-figure-center figure-img" width="200"></a></p>
</figure>
</div>
</div></div></section>
</section>
<section id="text" class="level3" data-number="1.4.2">
<h3 data-number="1.4.2" class="anchored" data-anchor-id="text"><span class="header-section-number">1.4.2</span> Text</h3>
<p>Text is a ubiquitous data source. One way to quantify text is to use a dictionary of interesting keywords <span class="math inline">\(w_1,\ldots,w_n\)</span>. Given a collection of documents <span class="math inline">\(d_1,\ldots,d_m\)</span>, we can define an <span class="math inline">\(m\times n\)</span> <strong>document–term matrix</strong> <span class="math inline">\(T\)</span> by letting <span class="math inline">\(T_{ij}\)</span> be the number of times term <span class="math inline">\(j\)</span> appears in document <span class="math inline">\(i\)</span>.</p>
</section>
<section id="images" class="level3" data-number="1.4.3">
<h3 data-number="1.4.3" class="anchored" data-anchor-id="images"><span class="header-section-number">1.4.3</span> Images</h3>
<p>The most straightforward way to represent an image is as a 3D array of values representing intensities representing of red, green and blue in each pixel. Sometimes it might be preferable to represent the image by a vector of statistics about these values, or by presence or absence of detected objects, etc.</p>
</section>
</section>
<section id="working-in-pandas" class="level2 page-columns page-full" data-number="1.5">
<h2 data-number="1.5" class="anchored" data-anchor-id="working-in-pandas"><span class="header-section-number">1.5</span> Working in pandas</h2>
<p>The most popular Python package for manipulating and analyzing data is <a href="https:pandas.pydata.org">pandas</a>. We will use the paradigm it presents, which is fairly well understood throughout data science.</p>
<section id="series" class="level3 page-columns page-full" data-number="1.5.1">
<h3 data-number="1.5.1" class="anchored" data-anchor-id="series"><span class="header-section-number">1.5.1</span> Series</h3>
<div id="def-series" class="theorem definition">
<p><span class="theorem-title"><strong>Definition 1.6</strong></span> A <strong>series</strong> is a vector that is indexed by a finite ordered set.</p>
</div>
<p>In NumPy, we always index vectors by absolute position. In pandas, the elements still have an underlying ordering, but we can index them by anything, including strings. Since names are more memorable and intuitive than arbitrary integers, using them makes code easier to write, read, and debug.</p>
<div id="exm-data-series" class="theorem example" data-chapter="1" data-description="Series" type="✍️">
<p><span class="theorem-title"><strong>Example 1.13</strong></span> Some data that can be viewed as series:</p>
<ul>
<li>The length, width, and height of a box can be expressed as a 3-vector of positive real numbers. If we index the vector by the names of the measurements, it becomes a series.</li>
<li>The number of steps taken by an individual over the course of a week can be expressed as a 7-vector of nonnegative integers. We could index it by the integers 1–7, or in a series by the names of the days of the week.</li>
<li>The bid prices of a stock at the end of each trading day can be represented as a <em>time series</em>, in which the index is drawn from timestamps.</li>
</ul>
</div>
<div id="exm-data-series-create" class="theorem example" data-chapter="1" data-description="Series in pandas" type="💻">
<p><span class="theorem-title"><strong>Example 1.14</strong></span> Here is a small pandas series. Note that we give the values first and then the index:</p>
<div id="63039a1b" class="cell" data-execution_count="60">
<div class="sourceCode cell-code" id="cb113"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb113-1"><a href="#cb113-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb113-2"><a href="#cb113-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-3"><a href="#cb113-3" aria-hidden="true" tabindex="-1"></a>names <span class="op">=</span> [<span class="st">"Marge"</span>, <span class="st">"Homer"</span>, <span class="st">"Bart"</span>, <span class="st">"Lisa"</span>, <span class="st">"Maggie"</span>]</span>
<span id="cb113-4"><a href="#cb113-4" aria-hidden="true" tabindex="-1"></a>months <span class="op">=</span> pd.Series( [<span class="st">"March"</span>, <span class="st">"May"</span>, <span class="st">"February"</span>, <span class="st">"May"</span>, <span class="st">"January"</span>], index<span class="op">=</span>names)</span>
<span id="cb113-5"><a href="#cb113-5" aria-hidden="true" tabindex="-1"></a>months</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="59">
<pre><code>Marge        March
Homer          May
Bart      February
Lisa           May
Maggie     January
dtype: object</code></pre>
</div>
</div>
<p>We can access the values by choosing a name in the index:</p>
<div id="baa14ae9" class="cell" data-execution_count="61">
<div class="sourceCode cell-code" id="cb115"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb115-1"><a href="#cb115-1" aria-hidden="true" tabindex="-1"></a>months[<span class="st">"Lisa"</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="60">
<pre><code>'May'</code></pre>
</div>
</div>
<p>If we access multiple values, we get a series that is a subset of the original:</p>
<div id="faab5abb" class="cell" data-execution_count="62">
<div class="sourceCode cell-code" id="cb117"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb117-1"><a href="#cb117-1" aria-hidden="true" tabindex="-1"></a>months[ [<span class="st">"Homer"</span>, <span class="st">"Marge"</span>] ]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="61">
<pre><code>Homer      May
Marge    March
dtype: object</code></pre>
</div>
</div>
<p>We can also use the <code>iloc</code> property to access the underlying vector by NumPy slicing:</p>
<div id="aa8a1a3a" class="cell" data-execution_count="63">
<div class="sourceCode cell-code" id="cb119"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb119-1"><a href="#cb119-1" aria-hidden="true" tabindex="-1"></a>months.iloc[<span class="op">-</span><span class="dv">3</span>:]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="62">
<pre><code>Bart      February
Lisa           May
Maggie     January
dtype: object</code></pre>
</div>
</div>
<p>Here is a series of years based on the same index:</p>
<div id="75462bf3" class="cell" data-execution_count="64">
<div class="sourceCode cell-code" id="cb121"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb121-1"><a href="#cb121-1" aria-hidden="true" tabindex="-1"></a>years <span class="op">=</span> pd.Series([<span class="dv">1955</span>, <span class="dv">1956</span>, <span class="dv">1979</span>, <span class="dv">1981</span>, <span class="dv">1988</span>], index<span class="op">=</span>names)</span>
<span id="cb121-2"><a href="#cb121-2" aria-hidden="true" tabindex="-1"></a>years</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="63">
<pre><code>Marge     1955
Homer     1956
Bart      1979
Lisa      1981
Maggie    1988
dtype: int64</code></pre>
</div>
</div>
<p>We can also start with the series and separate it into a vector of values and its index:</p>
<div id="556f1a6c" class="cell" data-execution_count="65">
<div class="sourceCode cell-code" id="cb123"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb123-1"><a href="#cb123-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Values:"</span>)</span>
<span id="cb123-2"><a href="#cb123-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(years.values)</span>
<span id="cb123-3"><a href="#cb123-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">Index:"</span>)</span>
<span id="cb123-4"><a href="#cb123-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(years.index)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Values:
[1955 1956 1979 1981 1988]

Index:
Index(['Marge', 'Homer', 'Bart', 'Lisa', 'Maggie'], dtype='object')</code></pre>
</div>
</div>
</div>

<div class="no-row-height column-margin column-container"><div class="">
<div style="max-width:400px">
<div style="position:relative;padding-bottom:71.25%">
<iframe id="kaltura_player" src="https://cdnapisec.kaltura.com/p/2358381/sp/235838100/embedIframeJs/uiconf_id/43030021/partner_id/2358381?iframeembed=true&amp;playerId=kaltura_player&amp;entry_id=1_pfydzfw6&amp;flashvars[streamerType]=auto&amp;flashvars[localizationCode]=en&amp;flashvars[sideBarContainer.plugin]=true&amp;flashvars[sideBarContainer.position]=left&amp;flashvars[sideBarContainer.clickToClose]=true&amp;flashvars[chapters.plugin]=true&amp;flashvars[chapters.layout]=vertical&amp;flashvars[chapters.thumbnailRotator]=false&amp;flashvars[streamSelector.plugin]=true&amp;flashvars[EmbedPlayer.SpinnerTarget]=videoHolder&amp;flashvars[dualScreen.plugin]=true&amp;flashvars[hotspots.plugin]=1&amp;flashvars[Kaltura.addCrossoriginToIframe]=true&amp;&amp;wid=1_y9gtvfzf" width="400" height="285" allowfullscreen="" webkitallowfullscreen="" mozallowfullscreen="" allow="autoplay *; fullscreen *; encrypted-media *" sandbox="allow-downloads allow-forms allow-same-origin allow-scripts allow-top-navigation allow-pointer-lock allow-popups allow-modals allow-orientation-lock allow-popups-to-escape-sandbox allow-presentation allow-top-navigation-by-user-activation" frameborder="0" title="Example 1.14" style="position:absolute;top:0;left:0;width:100%;height:100%;border:0">
</iframe>
</div>
</div>
</div></div><p><a href="#tbl-data-series" class="quarto-xref">Table&nbsp;<span>1.1</span></a> lists some common operations on pandas series. There is an <a href="https://pandas.pydata.org/docs/reference/series.html">exhaustive list</a> in the pandas documentation.</p>
<div id="tbl-data-series" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-data-series-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;1.1: Operations on pandas series
</figcaption>
<div aria-describedby="tbl-data-series-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="caption-top table">
<thead>
<tr class="header">
<th style="text-align: left;">Description</th>
<th style="text-align: left;">Syntax</th>
<th style="text-align: left;">Result</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">First or last entries</td>
<td style="text-align: left;"><code>s.head()</code>, <code>s.tail()</code></td>
<td style="text-align: left;">Series</td>
</tr>
<tr class="even">
<td style="text-align: left;">Length</td>
<td style="text-align: left;"><code>len(s)</code></td>
<td style="text-align: left;">integer</td>
</tr>
<tr class="odd">
<td style="text-align: left;">All of the values</td>
<td style="text-align: left;"><code>s.values</code></td>
<td style="text-align: left;">array</td>
</tr>
<tr class="even">
<td style="text-align: left;">Convert values to list</td>
<td style="text-align: left;"><code>list(s)</code></td>
<td style="text-align: left;">list</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Index</td>
<td style="text-align: left;"><code>s.index</code></td>
<td style="text-align: left;">Index</td>
</tr>
<tr class="even">
<td style="text-align: left;">Unique values</td>
<td style="text-align: left;"><code>s.unique()</code></td>
<td style="text-align: left;">array</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Appearance frequencies</td>
<td style="text-align: left;"><code>s.value_counts()</code></td>
<td style="text-align: left;">Series</td>
</tr>
<tr class="even">
<td style="text-align: left;">Extreme values</td>
<td style="text-align: left;"><code>s.min()</code>, <code>s.max()</code></td>
<td style="text-align: left;">number</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Sort by values</td>
<td style="text-align: left;"><code>s.sort_values()</code></td>
<td style="text-align: left;">Series</td>
</tr>
<tr class="even">
<td style="text-align: left;">Sum</td>
<td style="text-align: left;"><code>s.sum()</code></td>
<td style="text-align: left;">number</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Comparison</td>
<td style="text-align: left;"><code>s &gt; 1</code>, <code>s=="foo"</code></td>
<td style="text-align: left;">boolean Series</td>
</tr>
<tr class="even">
<td style="text-align: left;">Locate missing</td>
<td style="text-align: left;"><code>s.isna()</code></td>
<td style="text-align: left;">boolean Series</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Arithmetic</td>
<td style="text-align: left;"><code>s + 1</code>, <code>s * t</code></td>
<td style="text-align: left;">Series</td>
</tr>
<tr class="even">
<td style="text-align: left;">Delete one or more rows</td>
<td style="text-align: left;"><code>s.drop()</code></td>
<td style="text-align: left;">Series</td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Caution
</div>
</div>
<div class="callout-body-container callout-body">
<p>As always in Python, you need to pay attention to the difference between applying a function, like <code>foo(bar)</code>, accessing a property, like <code>foo.bar</code>, and calling an object method, <code>foo.bar()</code>. Extra or missing parentheses groups can cause errors.</p>
</div>
</div>
<div id="exm-data-series-operate" class="theorem example" data-chapter="1" data-description="Operations on series" type="💻">
<p><span class="theorem-title"><strong>Example 1.15</strong></span> We continue with the definitions in <a href="#exm-data-series-create" class="quarto-xref">Example&nbsp;<span>1.14</span></a>. Here are all the unique values of the months:</p>
<div id="60155592" class="cell" data-execution_count="66">
<div class="sourceCode cell-code" id="cb125"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb125-1"><a href="#cb125-1" aria-hidden="true" tabindex="-1"></a>months.unique()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="65">
<pre><code>array(['March', 'May', 'February', 'January'], dtype=object)</code></pre>
</div>
</div>
<p>Here are the frequencies of their appearance:</p>
<div id="51adf204" class="cell" data-execution_count="67">
<div class="sourceCode cell-code" id="cb127"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb127-1"><a href="#cb127-1" aria-hidden="true" tabindex="-1"></a>months.value_counts()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="66">
<pre><code>May         2
March       1
February    1
January     1
Name: count, dtype: int64</code></pre>
</div>
</div>
<p>Note that we can do a logical comparison and get a series of boolean values:</p>
<div id="e84a244c" class="cell" data-execution_count="68">
<div class="sourceCode cell-code" id="cb129"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb129-1"><a href="#cb129-1" aria-hidden="true" tabindex="-1"></a>months <span class="op">==</span> <span class="st">"May"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="67">
<pre><code>Marge     False
Homer      True
Bart      False
Lisa       True
Maggie    False
dtype: bool</code></pre>
</div>
</div>
<p>Since the years are numerical, we can do arithmetic operations on them:</p>
<div id="eb9785d5" class="cell" data-execution_count="69">
<div class="sourceCode cell-code" id="cb131"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb131-1"><a href="#cb131-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Minimum year is"</span>, years.<span class="bu">min</span>(), <span class="st">"and maximum year is"</span>, years.<span class="bu">max</span>())</span>
<span id="cb131-2"><a href="#cb131-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"The sum of the years is"</span>, years.<span class="bu">sum</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Minimum year is 1955 and maximum year is 1988
The sum of the years is 9859</code></pre>
</div>
</div>
<p>It can be useful to know the index where the minimum or maximum value occurs:</p>
<div id="ac5bfb81" class="cell" data-execution_count="70">
<div class="sourceCode cell-code" id="cb133"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb133-1"><a href="#cb133-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"The oldest is"</span>, years.idxmin(), <span class="st">"and the youngest is"</span>, years.idxmax())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>The oldest is Marge and the youngest is Maggie</code></pre>
</div>
</div>
</div>

<div class="no-row-height column-margin column-container"><div class="">
<div style="max-width:400px">
<div style="position:relative;padding-bottom:71.25%">
<iframe id="kaltura_player" src="https://cdnapisec.kaltura.com/p/2358381/sp/235838100/embedIframeJs/uiconf_id/43030021/partner_id/2358381?iframeembed=true&amp;playerId=kaltura_player&amp;entry_id=1_51folnr4&amp;flashvars[streamerType]=auto&amp;flashvars[localizationCode]=en&amp;flashvars[sideBarContainer.plugin]=true&amp;flashvars[sideBarContainer.position]=left&amp;flashvars[sideBarContainer.clickToClose]=true&amp;flashvars[chapters.plugin]=true&amp;flashvars[chapters.layout]=vertical&amp;flashvars[chapters.thumbnailRotator]=false&amp;flashvars[streamSelector.plugin]=true&amp;flashvars[EmbedPlayer.SpinnerTarget]=videoHolder&amp;flashvars[dualScreen.plugin]=true&amp;flashvars[hotspots.plugin]=1&amp;flashvars[Kaltura.addCrossoriginToIframe]=true&amp;&amp;wid=1_1s36ha3f" width="400" height="285" allowfullscreen="" webkitallowfullscreen="" mozallowfullscreen="" allow="autoplay *; fullscreen *; encrypted-media *" sandbox="allow-downloads allow-forms allow-same-origin allow-scripts allow-top-navigation allow-pointer-lock allow-popups allow-modals allow-orientation-lock allow-popups-to-escape-sandbox allow-presentation allow-top-navigation-by-user-activation" frameborder="0" title="Example 1.15" style="position:absolute;top:0;left:0;width:100%;height:100%;border:0">
</iframe>
</div>
</div>
</div></div></section>
<section id="data-frames" class="level3 page-columns page-full" data-number="1.5.2">
<h3 data-number="1.5.2" class="anchored" data-anchor-id="data-frames"><span class="header-section-number">1.5.2</span> Data frames</h3>
<div id="def-data-frame" class="theorem definition">
<p><span class="theorem-title"><strong>Definition 1.7</strong></span> A <strong>data frame</strong> is a collection of series that all share the same index set.</p>
</div>
<p>Essentially, a data frame is a 2D array with a common index for the rows, where the constituent series are the columns of the array. Those columns can also be indexed by names (strings). Since names are much more memorable and intuitive than arbitrarily assigned integers, data frames make code easier to write, read, and reason about.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>Curly braces <code>{ }</code> are used to construct a dictionary in Python.</p>
</div>
</div>
<div id="exm-data-frames-create" class="theorem example" data-chapter="1" data-description="Series and frames in pandas" type="💻">
<p><span class="theorem-title"><strong>Example 1.16</strong></span> We continue with the definitions of <code>months</code> and <code>years</code> in <a href="#exm-data-series-create" class="quarto-xref">Example&nbsp;<span>1.14</span></a>, and use a dictionary to specify the columns of a data frame:</p>
<div id="84281ce6" class="cell" data-execution_count="71">
<div class="sourceCode cell-code" id="cb135"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb135-1"><a href="#cb135-1" aria-hidden="true" tabindex="-1"></a>simpsons <span class="op">=</span> pd.DataFrame( {<span class="st">"month"</span>: months, <span class="st">"date"</span>:  [<span class="dv">19</span>, <span class="dv">12</span>, <span class="dv">23</span>, <span class="dv">9</span>, <span class="dv">14</span>], <span class="st">"year"</span>: years } )</span>
<span id="cb135-2"><a href="#cb135-2" aria-hidden="true" tabindex="-1"></a>simpsons</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="70">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">month</th>
<th data-quarto-table-cell-role="th">date</th>
<th data-quarto-table-cell-role="th">year</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">Marge</td>
<td>March</td>
<td>19</td>
<td>1955</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Homer</td>
<td>May</td>
<td>12</td>
<td>1956</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Bart</td>
<td>February</td>
<td>23</td>
<td>1979</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Lisa</td>
<td>May</td>
<td>9</td>
<td>1981</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Maggie</td>
<td>January</td>
<td>14</td>
<td>1988</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>Notice above that the <em>date</em> column was given as just a list of numbers; the index for it was inherited from the <code>months</code> series.</p>
<p>If we give the name of a column as an index into the frame, we get back a series for that column:</p>
<div id="9c8a2088" class="cell" data-execution_count="72">
<div class="sourceCode cell-code" id="cb136"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb136-1"><a href="#cb136-1" aria-hidden="true" tabindex="-1"></a>simpsons[<span class="st">"year"</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="71">
<pre><code>Marge     1955
Homer     1956
Bart      1979
Lisa      1981
Maggie    1988
Name: year, dtype: int64</code></pre>
</div>
</div>
<p>If we give a list of column names, we get back a data frame with just those columns:</p>
<div id="aedc844e" class="cell" data-execution_count="73">
<div class="sourceCode cell-code" id="cb138"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb138-1"><a href="#cb138-1" aria-hidden="true" tabindex="-1"></a>simpsons[ [<span class="st">"month"</span>, <span class="st">"date"</span>] ]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="72">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">month</th>
<th data-quarto-table-cell-role="th">date</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">Marge</td>
<td>March</td>
<td>19</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Homer</td>
<td>May</td>
<td>12</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Bart</td>
<td>February</td>
<td>23</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Lisa</td>
<td>May</td>
<td>9</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Maggie</td>
<td>January</td>
<td>14</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>We can even index a nonexistent column on the left side of an assignment, and pandas will create it for us:</p>
<div id="85389bbd" class="cell" data-execution_count="74">
<div class="sourceCode cell-code" id="cb139"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb139-1"><a href="#cb139-1" aria-hidden="true" tabindex="-1"></a>simpsons[<span class="st">"weekday"</span>] <span class="op">=</span> [<span class="st">"Saturday"</span>, <span class="st">"Saturday"</span>, <span class="st">"Friday"</span>, <span class="st">"Saturday"</span>, <span class="st">"Thursday"</span>]</span>
<span id="cb139-2"><a href="#cb139-2" aria-hidden="true" tabindex="-1"></a>simpsons</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="73">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">month</th>
<th data-quarto-table-cell-role="th">date</th>
<th data-quarto-table-cell-role="th">year</th>
<th data-quarto-table-cell-role="th">weekday</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">Marge</td>
<td>March</td>
<td>19</td>
<td>1955</td>
<td>Saturday</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Homer</td>
<td>May</td>
<td>12</td>
<td>1956</td>
<td>Saturday</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Bart</td>
<td>February</td>
<td>23</td>
<td>1979</td>
<td>Friday</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Lisa</td>
<td>May</td>
<td>9</td>
<td>1981</td>
<td>Saturday</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Maggie</td>
<td>January</td>
<td>14</td>
<td>1988</td>
<td>Thursday</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>We can access a row by using brackets with the <code>loc</code> property of the frame, getting a series indexed by the column names of the frame:</p>
<div id="beb9b1d2" class="cell" data-execution_count="75">
<div class="sourceCode cell-code" id="cb140"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb140-1"><a href="#cb140-1" aria-hidden="true" tabindex="-1"></a>simpsons.loc[<span class="st">"Maggie"</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="74">
<pre><code>month       January
date             14
year           1988
weekday    Thursday
Name: Maggie, dtype: object</code></pre>
</div>
</div>
<p>We are also free to strip away the index and get an ordinary array:</p>
<div id="79c6286f" class="cell" data-execution_count="76">
<div class="sourceCode cell-code" id="cb142"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb142-1"><a href="#cb142-1" aria-hidden="true" tabindex="-1"></a>simpsons.to_numpy()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="75">
<pre><code>array([['March', 19, 1955, 'Saturday'],
       ['May', 12, 1956, 'Saturday'],
       ['February', 23, 1979, 'Friday'],
       ['May', 9, 1981, 'Saturday'],
       ['January', 14, 1988, 'Thursday']], dtype=object)</code></pre>
</div>
</div>
<p>Another way to create a data frame is to give a list of rows, plus (optionally) the index and the names of the columns:</p>
<div id="da9066f6" class="cell" data-execution_count="77">
<div class="sourceCode cell-code" id="cb144"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb144-1"><a href="#cb144-1" aria-hidden="true" tabindex="-1"></a>pd.DataFrame( </span>
<span id="cb144-2"><a href="#cb144-2" aria-hidden="true" tabindex="-1"></a>    [ (<span class="st">"white"</span>, <span class="dv">5</span>), (<span class="st">"brown"</span>, <span class="dv">9</span>), (<span class="st">"pink"</span>, <span class="dv">8</span>) ], </span>
<span id="cb144-3"><a href="#cb144-3" aria-hidden="true" tabindex="-1"></a>    columns<span class="op">=</span>[<span class="st">"Color"</span>, <span class="st">"Rating"</span>],</span>
<span id="cb144-4"><a href="#cb144-4" aria-hidden="true" tabindex="-1"></a>    index<span class="op">=</span>[<span class="st">"vanilla"</span>, <span class="st">"chocolate"</span>, <span class="st">"strawberry"</span>]</span>
<span id="cb144-5"><a href="#cb144-5" aria-hidden="true" tabindex="-1"></a>    )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="76">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Color</th>
<th data-quarto-table-cell-role="th">Rating</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">vanilla</td>
<td>white</td>
<td>5</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">chocolate</td>
<td>brown</td>
<td>9</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">strawberry</td>
<td>pink</td>
<td>8</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</div>

<div class="no-row-height column-margin column-container"><div class="">
<div style="max-width:400px">
<div style="position:relative;padding-bottom:71.25%">
<iframe id="kaltura_player" src="https://cdnapisec.kaltura.com/p/2358381/sp/235838100/embedIframeJs/uiconf_id/43030021/partner_id/2358381?iframeembed=true&amp;playerId=kaltura_player&amp;entry_id=1_6i5fwhjv&amp;flashvars[streamerType]=auto&amp;flashvars[localizationCode]=en&amp;flashvars[sideBarContainer.plugin]=true&amp;flashvars[sideBarContainer.position]=left&amp;flashvars[sideBarContainer.clickToClose]=true&amp;flashvars[chapters.plugin]=true&amp;flashvars[chapters.layout]=vertical&amp;flashvars[chapters.thumbnailRotator]=false&amp;flashvars[streamSelector.plugin]=true&amp;flashvars[EmbedPlayer.SpinnerTarget]=videoHolder&amp;flashvars[dualScreen.plugin]=true&amp;flashvars[hotspots.plugin]=1&amp;flashvars[Kaltura.addCrossoriginToIframe]=true&amp;&amp;wid=1_xspxw0rn" width="400" height="285" allowfullscreen="" webkitallowfullscreen="" mozallowfullscreen="" allow="autoplay *; fullscreen *; encrypted-media *" sandbox="allow-downloads allow-forms allow-same-origin allow-scripts allow-top-navigation allow-pointer-lock allow-popups allow-modals allow-orientation-lock allow-popups-to-escape-sandbox allow-presentation allow-top-navigation-by-user-activation" frameborder="0" title="Example 1.16" style="position:absolute;top:0;left:0;width:100%;height:100%;border:0">
</iframe>
</div>
</div>
<p><br><br></p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="_media/memes/say_line.jpeg" class="lightbox" data-gallery="quarto-lightbox-gallery-6"><img src="_media/memes/say_line.jpeg" class="img-fluid quarto-figure quarto-figure-center figure-img" width="200"></a></p>
</figure>
</div>
</div></div></section>
<section id="common-operations" class="level3" data-number="1.5.3">
<h3 data-number="1.5.3" class="anchored" data-anchor-id="common-operations"><span class="header-section-number">1.5.3</span> Common operations</h3>
<p><a href="#tbl-data-frames" class="quarto-xref">Table&nbsp;<span>1.2</span></a> shows common operations specific to a data frame. But since the columns are series, the operations in <a href="#tbl-data-series" class="quarto-xref">Table&nbsp;<span>1.1</span></a> can be applied too, and they will act columnwise.</p>
<div id="tbl-data-frames" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-data-frames-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;1.2: Operations on pandas data frames
</figcaption>
<div aria-describedby="tbl-data-frames-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="caption-top table">
<colgroup>
<col style="width: 32%">
<col style="width: 44%">
<col style="width: 23%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Description</th>
<th style="text-align: left;">Syntax</th>
<th style="text-align: left;">Result</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Summary information</td>
<td style="text-align: left;"><code>df.info()</code>, <code>df.describe()</code></td>
<td style="text-align: left;">DataFrame</td>
</tr>
<tr class="even">
<td style="text-align: left;">First or last row(s)</td>
<td style="text-align: left;"><code>df.head()</code>, <code>df.tail()</code></td>
<td style="text-align: left;">DataFrame</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Number of rows</td>
<td style="text-align: left;"><code>len(df)</code></td>
<td style="text-align: left;">integer</td>
</tr>
<tr class="even">
<td style="text-align: left;">Number of rows and columns</td>
<td style="text-align: left;"><code>df.shape</code></td>
<td style="text-align: left;">tuple</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Row index</td>
<td style="text-align: left;"><code>df.index</code></td>
<td style="text-align: left;">Index</td>
</tr>
<tr class="even">
<td style="text-align: left;">Column names</td>
<td style="text-align: left;"><code>list(df)</code></td>
<td style="text-align: left;">list</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Column names</td>
<td style="text-align: left;"><code>df.columns</code></td>
<td style="text-align: left;">Index</td>
</tr>
<tr class="even">
<td style="text-align: left;">Access by column name(s)</td>
<td style="text-align: left;"><code>df["name"]</code>, <code>df[["col1", "col2"]]</code></td>
<td style="text-align: left;">Series or DataFrame</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Access by index/name</td>
<td style="text-align: left;"><code>df.loc[rows, "name"]</code></td>
<td style="text-align: left;">(varies)</td>
</tr>
<tr class="even">
<td style="text-align: left;">Access by position</td>
<td style="text-align: left;"><code>df.iloc[i, j]</code></td>
<td style="text-align: left;">(varies)</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Delete a column</td>
<td style="text-align: left;"><code>df.drop(name, axis=1)</code></td>
<td style="text-align: left;">DataFrame</td>
</tr>
<tr class="even">
<td style="text-align: left;">Sort by column values</td>
<td style="text-align: left;"><code>df.sort_values("column")</code></td>
<td style="text-align: left;">DataFrame</td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
<div id="exm-data-frames-operate" class="theorem example" data-chapter="1" data-description="Operations on data frames" type="💻">
<p><span class="theorem-title"><strong>Example 1.17</strong></span> We continue with the definitions of <code>simpsons</code> in <a href="#exm-data-frames-create" class="quarto-xref">Example&nbsp;<span>1.16</span></a>:</p>
<div id="52a07ad0" class="cell" data-execution_count="78">
<div class="sourceCode cell-code" id="cb145"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb145-1"><a href="#cb145-1" aria-hidden="true" tabindex="-1"></a>simpsons.info()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
Index: 5 entries, Marge to Maggie
Data columns (total 4 columns):
 #   Column   Non-Null Count  Dtype 
---  ------   --------------  ----- 
 0   month    5 non-null      object
 1   date     5 non-null      int64 
 2   year     5 non-null      int64 
 3   weekday  5 non-null      object
dtypes: int64(2), object(2)
memory usage: 372.0+ bytes</code></pre>
</div>
</div>
<div id="d095440d" class="cell" data-execution_count="79">
<div class="sourceCode cell-code" id="cb147"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb147-1"><a href="#cb147-1" aria-hidden="true" tabindex="-1"></a>simpsons.<span class="bu">min</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="78">
<pre><code>month      February
date              9
year           1955
weekday      Friday
dtype: object</code></pre>
</div>
</div>
<p>Summing numbers does what you expect, but summing strings concatenates them:</p>
<div id="374528c0" class="cell" data-execution_count="80">
<div class="sourceCode cell-code" id="cb149"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb149-1"><a href="#cb149-1" aria-hidden="true" tabindex="-1"></a>simpsons.<span class="bu">sum</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="79">
<pre><code>month                  MarchMayFebruaryMayJanuary
date                                           77
year                                         9859
weekday    SaturdaySaturdayFridaySaturdayThursday
dtype: object</code></pre>
</div>
</div>
<p>We can sort the entire frame by its values in a column:</p>
<div id="98c73979" class="cell" data-execution_count="81">
<div class="sourceCode cell-code" id="cb151"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb151-1"><a href="#cb151-1" aria-hidden="true" tabindex="-1"></a>simpsons.sort_values(<span class="st">"date"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="80">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">month</th>
<th data-quarto-table-cell-role="th">date</th>
<th data-quarto-table-cell-role="th">year</th>
<th data-quarto-table-cell-role="th">weekday</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">Lisa</td>
<td>May</td>
<td>9</td>
<td>1981</td>
<td>Saturday</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Homer</td>
<td>May</td>
<td>12</td>
<td>1956</td>
<td>Saturday</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Maggie</td>
<td>January</td>
<td>14</td>
<td>1988</td>
<td>Thursday</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Marge</td>
<td>March</td>
<td>19</td>
<td>1955</td>
<td>Saturday</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Bart</td>
<td>February</td>
<td>23</td>
<td>1979</td>
<td>Friday</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</div>
<p>For a more thorough demonstration of operations on data frames, look at the <a href="https://pandas.pydata.org/docs/user_guide/basics.html">pandas user guide</a>. There is also an <a href="https://pandas.pydata.org/docs/reference/frame.html">exhaustive list</a> of relevant functions in the pandas documentation.</p>
</section>
<section id="loading-from-files" class="level3 page-columns page-full" data-number="1.5.4">
<h3 data-number="1.5.4" class="anchored" data-anchor-id="loading-from-files"><span class="header-section-number">1.5.4</span> Loading from files</h3>
<p>Datasets can be presented in many forms. The simplest and most universal are <strong>comma-separated value</strong> (CSV) files. Such files can be read by pandas locally or over the web.</p>
<div id="exm-data-read" class="theorem example" data-chapter="1" data-description="Importing CSV data" type="💻">
<p><span class="theorem-title"><strong>Example 1.18</strong></span> The pandas function we use to load a dataset from CSV is <code>read_csv</code>. Here we use it to read a file that is available over the web:</p>
<div id="d9b9a87f" class="cell" data-execution_count="82">
<div class="sourceCode cell-code" id="cb152"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb152-1"><a href="#cb152-1" aria-hidden="true" tabindex="-1"></a>ads <span class="op">=</span> pd.read_csv(<span class="st">"https://raw.githubusercontent.com/tobydriscoll/ds1book/master/advertising.csv"</span>)</span>
<span id="cb152-2"><a href="#cb152-2" aria-hidden="true" tabindex="-1"></a>ads.head(<span class="dv">6</span>)    <span class="co"># show the first 6 rows</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="81">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">TV</th>
<th data-quarto-table-cell-role="th">Radio</th>
<th data-quarto-table-cell-role="th">Newspaper</th>
<th data-quarto-table-cell-role="th">Sales</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>230.1</td>
<td>37.8</td>
<td>69.2</td>
<td>22.1</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>44.5</td>
<td>39.3</td>
<td>45.1</td>
<td>10.4</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>17.2</td>
<td>45.9</td>
<td>69.3</td>
<td>12.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>151.5</td>
<td>41.3</td>
<td>58.5</td>
<td>16.5</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>180.8</td>
<td>10.8</td>
<td>58.4</td>
<td>17.9</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">5</td>
<td>8.7</td>
<td>48.9</td>
<td>75.0</td>
<td>7.2</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>Note above that we used <code>head(6)</code> to see just the first 6 rows.</p>
<p>It’s a good idea to check what you’ve just loaded:</p>
<div id="e6fb4374" class="cell" data-execution_count="83">
<div class="sourceCode cell-code" id="cb153"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb153-1"><a href="#cb153-1" aria-hidden="true" tabindex="-1"></a>ads.info()   </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
RangeIndex: 200 entries, 0 to 199
Data columns (total 4 columns):
 #   Column     Non-Null Count  Dtype  
---  ------     --------------  -----  
 0   TV         200 non-null    float64
 1   Radio      200 non-null    float64
 2   Newspaper  200 non-null    float64
 3   Sales      200 non-null    float64
dtypes: float64(4)
memory usage: 6.4 KB</code></pre>
</div>
</div>
</div>

<div class="no-row-height column-margin column-container"><div class="">
<div style="max-width:304px">
<div style="position:relative;padding-bottom:75.986842105263%">
<iframe id="kaltura_player" src="https://cdnapisec.kaltura.com/p/2358381/sp/235838100/embedIframeJs/uiconf_id/43030021/partner_id/2358381?iframeembed=true&amp;playerId=kaltura_player&amp;entry_id=1_mrq75g07&amp;flashvars[streamerType]=auto&amp;flashvars[localizationCode]=en&amp;flashvars[sideBarContainer.plugin]=true&amp;flashvars[sideBarContainer.position]=left&amp;flashvars[sideBarContainer.clickToClose]=true&amp;flashvars[chapters.plugin]=true&amp;flashvars[chapters.layout]=vertical&amp;flashvars[chapters.thumbnailRotator]=false&amp;flashvars[streamSelector.plugin]=true&amp;flashvars[EmbedPlayer.SpinnerTarget]=videoHolder&amp;flashvars[dualScreen.plugin]=true&amp;flashvars[hotspots.plugin]=1&amp;flashvars[Kaltura.addCrossoriginToIframe]=true&amp;&amp;wid=1_dc029nzp" width="304" height="231" allowfullscreen="" webkitallowfullscreen="" mozallowfullscreen="" allow="autoplay *; fullscreen *; encrypted-media *" sandbox="allow-downloads allow-forms allow-same-origin allow-scripts allow-top-navigation allow-pointer-lock allow-popups allow-modals allow-orientation-lock allow-popups-to-escape-sandbox allow-presentation allow-top-navigation-by-user-activation" frameborder="0" title="Example 1.18" style="position:absolute;top:0;left:0;width:100%;height:100%;border:0">
</iframe>
</div>
</div>
<p><br><br></p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="_media/memes/mad_men.jpg" class="lightbox" data-gallery="quarto-lightbox-gallery-7"><img src="_media/memes/mad_men.jpg" class="img-fluid quarto-figure quarto-figure-center figure-img" width="200"></a></p>
</figure>
</div>
</div></div><div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>Here is one thing to watch for when loading numerical data: if a column has anything non-numeric in it, like “N/A” or “unknown”, pandas will load that column as a string.</p>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>While it’s possible to import datasets directly from the web, links change and disappear frequently. If storing the dataset locally is not a problem, you may want to download your own copy before working on it.</p>
</div>
</div>
<p>It’s also possible to import data from most other general-purpose formats you might encounter, such as Excel spreadsheets (though possibly requiring one-time installation of additional libraries). There are many functions starting with <code>pd.read_</code> showing the formats pandas understands.</p>
</section>
</section>
<section id="selecting-rows-and-columns" class="level2 page-columns page-full" data-number="1.6">
<h2 data-number="1.6" class="anchored" data-anchor-id="selecting-rows-and-columns"><span class="header-section-number">1.6</span> Selecting rows and columns</h2>
<p>In a data frame, we access columns by giving a string name, or a list of names, in square brackets. We can access a row by the <code>loc</code> property with an index value, or <code>iloc</code> with an absolute row number starting from zero.</p>
<div id="exm-data-row-iloc" class="theorem example" data-chapter="1" data-description="iloc for rows in a frame" type="💻">
<p><span class="theorem-title"><strong>Example 1.19</strong></span> Here’s a local file that contains daily weather summaries from Newark, Delaware:</p>
<div id="31d52c55" class="cell" data-execution_count="84">
<div class="sourceCode cell-code" id="cb155"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb155-1"><a href="#cb155-1" aria-hidden="true" tabindex="-1"></a>weather <span class="op">=</span> pd.read_csv(<span class="st">"_datasets/ghcn_newark.csv"</span>)</span>
<span id="cb155-2"><a href="#cb155-2" aria-hidden="true" tabindex="-1"></a>weather.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="83">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">STATION</th>
<th data-quarto-table-cell-role="th">DATE</th>
<th data-quarto-table-cell-role="th">LATITUDE</th>
<th data-quarto-table-cell-role="th">LONGITUDE</th>
<th data-quarto-table-cell-role="th">ELEVATION</th>
<th data-quarto-table-cell-role="th">NAME</th>
<th data-quarto-table-cell-role="th">PRCP</th>
<th data-quarto-table-cell-role="th">PRCP_ATTRIBUTES</th>
<th data-quarto-table-cell-role="th">SNOW</th>
<th data-quarto-table-cell-role="th">SNOW_ATTRIBUTES</th>
<th data-quarto-table-cell-role="th">...</th>
<th data-quarto-table-cell-role="th">WT08</th>
<th data-quarto-table-cell-role="th">WT08_ATTRIBUTES</th>
<th data-quarto-table-cell-role="th">WT11</th>
<th data-quarto-table-cell-role="th">WT11_ATTRIBUTES</th>
<th data-quarto-table-cell-role="th">WT14</th>
<th data-quarto-table-cell-role="th">WT14_ATTRIBUTES</th>
<th data-quarto-table-cell-role="th">WT16</th>
<th data-quarto-table-cell-role="th">WT16_ATTRIBUTES</th>
<th data-quarto-table-cell-role="th">WT18</th>
<th data-quarto-table-cell-role="th">WT18_ATTRIBUTES</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>USC00076410</td>
<td>1894-04-01</td>
<td>39.6682</td>
<td>-75.74569</td>
<td>32.3</td>
<td>NEWARK AG FARM, DE US</td>
<td>0.0</td>
<td>P,,6,</td>
<td>NaN</td>
<td>NaN</td>
<td>...</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>USC00076410</td>
<td>1894-04-02</td>
<td>39.6682</td>
<td>-75.74569</td>
<td>32.3</td>
<td>NEWARK AG FARM, DE US</td>
<td>0.0</td>
<td>P,,6,</td>
<td>NaN</td>
<td>NaN</td>
<td>...</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>USC00076410</td>
<td>1894-04-03</td>
<td>39.6682</td>
<td>-75.74569</td>
<td>32.3</td>
<td>NEWARK AG FARM, DE US</td>
<td>0.0</td>
<td>P,,6,</td>
<td>NaN</td>
<td>NaN</td>
<td>...</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>USC00076410</td>
<td>1894-04-04</td>
<td>39.6682</td>
<td>-75.74569</td>
<td>32.3</td>
<td>NEWARK AG FARM, DE US</td>
<td>165.0</td>
<td>,,6,</td>
<td>NaN</td>
<td>NaN</td>
<td>...</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>USC00076410</td>
<td>1894-04-05</td>
<td>39.6682</td>
<td>-75.74569</td>
<td>32.3</td>
<td>NEWARK AG FARM, DE US</td>
<td>0.0</td>
<td>P,,6,</td>
<td>NaN</td>
<td>NaN</td>
<td>...</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
</tr>
</tbody>
</table>

<p>5 rows × 56 columns</p>
</div>
</div>
</div>
<p>There are lots of columns here. We will work with a small subset of them:</p>
<div id="542ee67f" class="cell" data-execution_count="85">
<div class="sourceCode cell-code" id="cb156"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb156-1"><a href="#cb156-1" aria-hidden="true" tabindex="-1"></a>columns <span class="op">=</span> [<span class="st">"DATE"</span>, <span class="st">"PRCP"</span>, <span class="st">"SNOW"</span>, <span class="st">"TMAX"</span>, <span class="st">"TMIN"</span>]</span>
<span id="cb156-2"><a href="#cb156-2" aria-hidden="true" tabindex="-1"></a>weather <span class="op">=</span> weather[columns]</span>
<span id="cb156-3"><a href="#cb156-3" aria-hidden="true" tabindex="-1"></a>weather.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="84">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">DATE</th>
<th data-quarto-table-cell-role="th">PRCP</th>
<th data-quarto-table-cell-role="th">SNOW</th>
<th data-quarto-table-cell-role="th">TMAX</th>
<th data-quarto-table-cell-role="th">TMIN</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>1894-04-01</td>
<td>0.0</td>
<td>NaN</td>
<td>189.0</td>
<td>111.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>1894-04-02</td>
<td>0.0</td>
<td>NaN</td>
<td>133.0</td>
<td>22.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>1894-04-03</td>
<td>0.0</td>
<td>NaN</td>
<td>89.0</td>
<td>-61.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>1894-04-04</td>
<td>165.0</td>
<td>NaN</td>
<td>117.0</td>
<td>17.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>1894-04-05</td>
<td>0.0</td>
<td>NaN</td>
<td>156.0</td>
<td>56.0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>The first row has absolute position zero:</p>
<div id="8069e78c" class="cell" data-execution_count="86">
<div class="sourceCode cell-code" id="cb157"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb157-1"><a href="#cb157-1" aria-hidden="true" tabindex="-1"></a>weather.iloc[<span class="dv">0</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="85">
<pre><code>DATE    1894-04-01
PRCP           0.0
SNOW           NaN
TMAX         189.0
TMIN         111.0
Name: 0, dtype: object</code></pre>
</div>
</div>
<p>The result above is a series, with the column names of the original data frame serving as the index. The following result is subtly different:</p>
<div id="cacc8889" class="cell" data-execution_count="87">
<div class="sourceCode cell-code" id="cb159"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb159-1"><a href="#cb159-1" aria-hidden="true" tabindex="-1"></a>weather.iloc[:<span class="dv">1</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="86">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">DATE</th>
<th data-quarto-table-cell-role="th">PRCP</th>
<th data-quarto-table-cell-role="th">SNOW</th>
<th data-quarto-table-cell-role="th">TMAX</th>
<th data-quarto-table-cell-role="th">TMIN</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>1894-04-01</td>
<td>0.0</td>
<td>NaN</td>
<td>189.0</td>
<td>111.0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>The slicing syntax <code>[:1]</code> means “the first 1 rows”. The result is a one-row data frame—<em>not</em> a series. To access the last 4 rows, we can use a negative index:</p>
<div id="0068a77a" class="cell" data-execution_count="88">
<div class="sourceCode cell-code" id="cb160"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb160-1"><a href="#cb160-1" aria-hidden="true" tabindex="-1"></a>weather.iloc[<span class="op">-</span><span class="dv">4</span>:]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="87">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">DATE</th>
<th data-quarto-table-cell-role="th">PRCP</th>
<th data-quarto-table-cell-role="th">SNOW</th>
<th data-quarto-table-cell-role="th">TMAX</th>
<th data-quarto-table-cell-role="th">TMIN</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">29513</td>
<td>2022-12-17</td>
<td>0.0</td>
<td>NaN</td>
<td>72.0</td>
<td>11.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">29514</td>
<td>2022-12-18</td>
<td>0.0</td>
<td>NaN</td>
<td>39.0</td>
<td>-22.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">29515</td>
<td>2023-01-06</td>
<td>0.0</td>
<td>NaN</td>
<td>89.0</td>
<td>33.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">29516</td>
<td>2023-01-07</td>
<td>0.0</td>
<td>NaN</td>
<td>72.0</td>
<td>17.0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</div>

<div class="no-row-height column-margin column-container"><div class="">
<div style="max-width:304px">
<div style="position:relative;padding-bottom:75.986842105263%">
<iframe id="kaltura_player" src="https://cdnapisec.kaltura.com/p/2358381/sp/235838100/embedIframeJs/uiconf_id/43030021/partner_id/2358381?iframeembed=true&amp;playerId=kaltura_player&amp;entry_id=1_q2pr26id&amp;flashvars[streamerType]=auto&amp;flashvars[localizationCode]=en&amp;flashvars[sideBarContainer.plugin]=true&amp;flashvars[sideBarContainer.position]=left&amp;flashvars[sideBarContainer.clickToClose]=true&amp;flashvars[chapters.plugin]=true&amp;flashvars[chapters.layout]=vertical&amp;flashvars[chapters.thumbnailRotator]=false&amp;flashvars[streamSelector.plugin]=true&amp;flashvars[EmbedPlayer.SpinnerTarget]=videoHolder&amp;flashvars[dualScreen.plugin]=true&amp;flashvars[hotspots.plugin]=1&amp;flashvars[Kaltura.addCrossoriginToIframe]=true&amp;&amp;wid=1_oflglmwo" width="304" height="231" allowfullscreen="" webkitallowfullscreen="" mozallowfullscreen="" allow="autoplay *; fullscreen *; encrypted-media *" sandbox="allow-downloads allow-forms allow-same-origin allow-scripts allow-top-navigation allow-pointer-lock allow-popups allow-modals allow-orientation-lock allow-popups-to-escape-sandbox allow-presentation allow-top-navigation-by-user-activation" frameborder="0" title="Example 1.19" style="position:absolute;top:0;left:0;width:100%;height:100%;border:0">
</iframe>
</div>
</div>
</div></div><p>In <a href="#exm-data-row-iloc" class="quarto-xref">Example&nbsp;<span>1.19</span></a>, we did not specify an index for the data frame, so the row numbers were the index. If we give a data frame a different index, we can use <code>loc</code> to access rows by the index value.</p>
<div id="exm-data-row-loc" class="theorem example" data-chapter="1" data-description="loc for rows in a frame" type="💻">
<p><span class="theorem-title"><strong>Example 1.20</strong></span> A natural candidate for an index in the weather data is the <em>DATE</em> column. This can be specified when the file is read, but here we do it after the fact:</p>
<div id="4c159be3" class="cell" data-execution_count="89">
<div class="sourceCode cell-code" id="cb161"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb161-1"><a href="#cb161-1" aria-hidden="true" tabindex="-1"></a>dated_weather <span class="op">=</span> weather.set_index(<span class="st">"DATE"</span>)</span>
<span id="cb161-2"><a href="#cb161-2" aria-hidden="true" tabindex="-1"></a>dated_weather.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="88">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">PRCP</th>
<th data-quarto-table-cell-role="th">SNOW</th>
<th data-quarto-table-cell-role="th">TMAX</th>
<th data-quarto-table-cell-role="th">TMIN</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">DATE</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">1894-04-01</td>
<td>0.0</td>
<td>NaN</td>
<td>189.0</td>
<td>111.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1894-04-02</td>
<td>0.0</td>
<td>NaN</td>
<td>133.0</td>
<td>22.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">1894-04-03</td>
<td>0.0</td>
<td>NaN</td>
<td>89.0</td>
<td>-61.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1894-04-04</td>
<td>165.0</td>
<td>NaN</td>
<td>117.0</td>
<td>17.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">1894-04-05</td>
<td>0.0</td>
<td>NaN</td>
<td>156.0</td>
<td>56.0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>Notice above that the leftmost column of <code>dated_weather</code> is the index, which still has the column name <em>DATE</em>. We can access a row by giving a date string to <code>loc</code>:</p>
<div id="0f61bf48" class="cell" data-execution_count="90">
<div class="sourceCode cell-code" id="cb162"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb162-1"><a href="#cb162-1" aria-hidden="true" tabindex="-1"></a>dated_weather.loc[<span class="st">"1979-03-28"</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="89">
<pre><code>PRCP      0.0
SNOW      0.0
TMAX    111.0
TMIN    -33.0
Name: 1979-03-28, dtype: float64</code></pre>
</div>
</div>
<p>We can extract a row and column simultaneously by giving both to <code>loc</code>:</p>
<div id="d238b59f" class="cell" data-execution_count="91">
<div class="sourceCode cell-code" id="cb164"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb164-1"><a href="#cb164-1" aria-hidden="true" tabindex="-1"></a>dated_weather.loc[<span class="st">"1979-03-28"</span>, <span class="st">"TMAX"</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="90">
<pre><code>111.0</code></pre>
</div>
</div>
<p>When the index is a date, as is the case here, we can even use a range of dates:</p>
<div id="6bfc4bfe" class="cell" data-execution_count="92">
<div class="sourceCode cell-code" id="cb166"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb166-1"><a href="#cb166-1" aria-hidden="true" tabindex="-1"></a>dated_weather.loc[<span class="st">"1979-03-01"</span>:<span class="st">"1979-03-06"</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="91">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">PRCP</th>
<th data-quarto-table-cell-role="th">SNOW</th>
<th data-quarto-table-cell-role="th">TMAX</th>
<th data-quarto-table-cell-role="th">TMIN</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">DATE</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">1979-03-01</td>
<td>0.0</td>
<td>0.0</td>
<td>122.0</td>
<td>-22.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1979-03-02</td>
<td>3.0</td>
<td>0.0</td>
<td>128.0</td>
<td>33.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">1979-03-03</td>
<td>0.0</td>
<td>0.0</td>
<td>117.0</td>
<td>22.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1979-03-04</td>
<td>0.0</td>
<td>0.0</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">1979-03-05</td>
<td>61.0</td>
<td>0.0</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1979-03-06</td>
<td>173.0</td>
<td>0.0</td>
<td>128.0</td>
<td>83.0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</div>

<div class="no-row-height column-margin column-container"><div class="">
<div style="max-width:304px">
<div style="position:relative;padding-bottom:75.986842105263%">
<iframe id="kaltura_player" src="https://cdnapisec.kaltura.com/p/2358381/sp/235838100/embedIframeJs/uiconf_id/43030021/partner_id/2358381?iframeembed=true&amp;playerId=kaltura_player&amp;entry_id=1_19xrcnne&amp;flashvars[streamerType]=auto&amp;flashvars[localizationCode]=en&amp;flashvars[sideBarContainer.plugin]=true&amp;flashvars[sideBarContainer.position]=left&amp;flashvars[sideBarContainer.clickToClose]=true&amp;flashvars[chapters.plugin]=true&amp;flashvars[chapters.layout]=vertical&amp;flashvars[chapters.thumbnailRotator]=false&amp;flashvars[streamSelector.plugin]=true&amp;flashvars[EmbedPlayer.SpinnerTarget]=videoHolder&amp;flashvars[dualScreen.plugin]=true&amp;flashvars[hotspots.plugin]=1&amp;flashvars[Kaltura.addCrossoriginToIframe]=true&amp;&amp;wid=1_3xgggkkf" width="304" height="231" allowfullscreen="" webkitallowfullscreen="" mozallowfullscreen="" allow="autoplay *; fullscreen *; encrypted-media *" sandbox="allow-downloads allow-forms allow-same-origin allow-scripts allow-top-navigation allow-pointer-lock allow-popups allow-modals allow-orientation-lock allow-popups-to-escape-sandbox allow-presentation allow-top-navigation-by-user-activation" frameborder="0" title="Example 1.20" style="position:absolute;top:0;left:0;width:100%;height:100%;border:0">
</iframe>
</div>
</div>
</div></div><p>Frequently we want to select rows from a data frame based on criteria applied to the data itself. We can use relational operators such as <code>&gt;</code>, <code>&lt;</code>, <code>==</code>, etc. to select rows based on the values in a column.</p>
<div id="exm-data-row-select" class="theorem example" data-chapter="1" data-description="Selecting rows in a frame" type="💻">
<p><span class="theorem-title"><strong>Example 1.21</strong></span> Here is how we can select all the rows in which the value of <em>PRCP</em> is greater than 1200:</p>
<div id="469b7eb0" class="cell" data-execution_count="93">
<div class="sourceCode cell-code" id="cb167"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb167-1"><a href="#cb167-1" aria-hidden="true" tabindex="-1"></a>weather.loc[weather[<span class="st">"PRCP"</span>] <span class="op">&gt;</span> <span class="dv">1200</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="92">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">DATE</th>
<th data-quarto-table-cell-role="th">PRCP</th>
<th data-quarto-table-cell-role="th">SNOW</th>
<th data-quarto-table-cell-role="th">TMAX</th>
<th data-quarto-table-cell-role="th">TMIN</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">9396</td>
<td>1952-07-09</td>
<td>1377.0</td>
<td>0.0</td>
<td>261.0</td>
<td>200.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">12382</td>
<td>1960-09-12</td>
<td>1331.0</td>
<td>0.0</td>
<td>222.0</td>
<td>167.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">16352</td>
<td>1971-08-27</td>
<td>1207.0</td>
<td>0.0</td>
<td>256.0</td>
<td>194.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">26543</td>
<td>1999-09-16</td>
<td>2202.0</td>
<td>0.0</td>
<td>206.0</td>
<td>156.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">27938</td>
<td>2004-07-12</td>
<td>1580.0</td>
<td>0.0</td>
<td>244.0</td>
<td>189.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">27986</td>
<td>2004-09-29</td>
<td>1450.0</td>
<td>0.0</td>
<td>244.0</td>
<td>178.0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>There are two steps above. The expression inside the square brackets produces a series of Boolean values:</p>
<div id="a94b1120" class="cell" data-execution_count="94">
<div class="sourceCode cell-code" id="cb168"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb168-1"><a href="#cb168-1" aria-hidden="true" tabindex="-1"></a>is_prcp <span class="op">=</span> (weather[<span class="st">"PRCP"</span>] <span class="op">&gt;</span> <span class="dv">1200</span>)</span>
<span id="cb168-2"><a href="#cb168-2" aria-hidden="true" tabindex="-1"></a>is_prcp.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="93">
<pre><code>0    False
1    False
2    False
3    False
4    False
Name: PRCP, dtype: bool</code></pre>
</div>
</div>
<p>This series can be used to select rows with <code>loc</code>. Actually, it works without <code>loc</code> as well, because pandas knows it is a row selector:</p>
<div id="1a586098" class="cell" data-execution_count="95">
<div class="sourceCode cell-code" id="cb170"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb170-1"><a href="#cb170-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"There are"</span>,is_prcp.<span class="bu">sum</span>(),<span class="st">"rows with PRCP &gt; 1200."</span>)</span>
<span id="cb170-2"><a href="#cb170-2" aria-hidden="true" tabindex="-1"></a>weather[is_prcp]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>There are 6 rows with PRCP &gt; 1200.</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="94">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">DATE</th>
<th data-quarto-table-cell-role="th">PRCP</th>
<th data-quarto-table-cell-role="th">SNOW</th>
<th data-quarto-table-cell-role="th">TMAX</th>
<th data-quarto-table-cell-role="th">TMIN</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">9396</td>
<td>1952-07-09</td>
<td>1377.0</td>
<td>0.0</td>
<td>261.0</td>
<td>200.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">12382</td>
<td>1960-09-12</td>
<td>1331.0</td>
<td>0.0</td>
<td>222.0</td>
<td>167.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">16352</td>
<td>1971-08-27</td>
<td>1207.0</td>
<td>0.0</td>
<td>256.0</td>
<td>194.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">26543</td>
<td>1999-09-16</td>
<td>2202.0</td>
<td>0.0</td>
<td>206.0</td>
<td>156.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">27938</td>
<td>2004-07-12</td>
<td>1580.0</td>
<td>0.0</td>
<td>244.0</td>
<td>189.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">27986</td>
<td>2004-09-29</td>
<td>1450.0</td>
<td>0.0</td>
<td>244.0</td>
<td>178.0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>We can use logical operators <code>&amp;</code> (AND), <code>|</code> (OR), and <code>~</code> (NOT) on these Boolean series in order to combine criteria:</p>
<div id="700a7083" class="cell" data-execution_count="96">
<div class="sourceCode cell-code" id="cb172"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb172-1"><a href="#cb172-1" aria-hidden="true" tabindex="-1"></a>weather[(weather[<span class="st">"TMAX"</span>] <span class="op">&lt;</span> <span class="dv">0</span>) <span class="op">&amp;</span> (weather[<span class="st">"SNOW"</span>] <span class="op">&gt;</span> <span class="dv">0</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="95">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">DATE</th>
<th data-quarto-table-cell-role="th">PRCP</th>
<th data-quarto-table-cell-role="th">SNOW</th>
<th data-quarto-table-cell-role="th">TMAX</th>
<th data-quarto-table-cell-role="th">TMIN</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">272</td>
<td>1895-01-29</td>
<td>102.0</td>
<td>102.0</td>
<td>-22.0</td>
<td>-94.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">282</td>
<td>1895-02-08</td>
<td>127.0</td>
<td>178.0</td>
<td>-139.0</td>
<td>-189.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">692</td>
<td>1896-03-24</td>
<td>33.0</td>
<td>51.0</td>
<td>-22.0</td>
<td>-100.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">943</td>
<td>1896-11-30</td>
<td>107.0</td>
<td>76.0</td>
<td>-6.0</td>
<td>-33.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">966</td>
<td>1896-12-23</td>
<td>48.0</td>
<td>51.0</td>
<td>-6.0</td>
<td>-89.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">25224</td>
<td>1996-01-08</td>
<td>3.0</td>
<td>25.0</td>
<td>-28.0</td>
<td>-156.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">25249</td>
<td>1996-02-02</td>
<td>20.0</td>
<td>25.0</td>
<td>-22.0</td>
<td>-56.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">25250</td>
<td>1996-02-03</td>
<td>155.0</td>
<td>147.0</td>
<td>-33.0</td>
<td>-111.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">25594</td>
<td>1997-01-12</td>
<td>13.0</td>
<td>13.0</td>
<td>-33.0</td>
<td>-100.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">25623</td>
<td>1997-03-10</td>
<td>178.0</td>
<td>8.0</td>
<td>-17.0</td>
<td>167.0</td>
</tr>
</tbody>
</table>

<p>131 rows × 5 columns</p>
</div>
</div>
</div>
</div>

<div class="no-row-height column-margin column-container"><div class="">
<div style="max-width:304px">
<div style="position:relative;padding-bottom:75.986842105263%">
<iframe id="kaltura_player" src="https://cdnapisec.kaltura.com/p/2358381/sp/235838100/embedIframeJs/uiconf_id/43030021/partner_id/2358381?iframeembed=true&amp;playerId=kaltura_player&amp;entry_id=1_k1lb9pe7&amp;flashvars[streamerType]=auto&amp;flashvars[localizationCode]=en&amp;flashvars[sideBarContainer.plugin]=true&amp;flashvars[sideBarContainer.position]=left&amp;flashvars[sideBarContainer.clickToClose]=true&amp;flashvars[chapters.plugin]=true&amp;flashvars[chapters.layout]=vertical&amp;flashvars[chapters.thumbnailRotator]=false&amp;flashvars[streamSelector.plugin]=true&amp;flashvars[EmbedPlayer.SpinnerTarget]=videoHolder&amp;flashvars[dualScreen.plugin]=true&amp;flashvars[hotspots.plugin]=1&amp;flashvars[Kaltura.addCrossoriginToIframe]=true&amp;&amp;wid=1_hs13e0f9" width="304" height="231" allowfullscreen="" webkitallowfullscreen="" mozallowfullscreen="" allow="autoplay *; fullscreen *; encrypted-media *" sandbox="allow-downloads allow-forms allow-same-origin allow-scripts allow-top-navigation allow-pointer-lock allow-popups allow-modals allow-orientation-lock allow-popups-to-escape-sandbox allow-presentation allow-top-navigation-by-user-activation" frameborder="0" title="Example 1.21" style="position:absolute;top:0;left:0;width:100%;height:100%;border:0">
</iframe>
</div>
</div>
<p><br><br></p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="_media/memes/weather.jpg" class="lightbox" data-gallery="quarto-lightbox-gallery-8"><img src="_media/memes/weather.jpg" class="img-fluid quarto-figure quarto-figure-center figure-img" width="200"></a></p>
</figure>
</div>
</div></div><div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>The pandas user guide has a handy <a href="https://pandas.pydata.org/docs/user_guide/10min.html?highlight=boolean#selection">section on selections</a>.</p>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>For practice with pandas fundamentals, try the <a href="https://www.kaggle.com/learn/pandas">Kaggle course</a>.</p>
</div>
</div>
</section>
<section id="combining-data-frames" class="level2 page-columns page-full" data-number="1.7">
<h2 data-number="1.7" class="anchored" data-anchor-id="combining-data-frames"><span class="header-section-number">1.7</span> Combining data frames</h2>
<p>Sometimes you want to combine data from different sources. There are multiple ways to do this in pandas, depending on the structure of the data you want to combine and the result you want to receive.</p>
<section id="concatenation" class="level3 page-columns page-full" data-number="1.7.1">
<h3 data-number="1.7.1" class="anchored" data-anchor-id="concatenation"><span class="header-section-number">1.7.1</span> Concatenation</h3>
<p>The <code>concat</code> function is used to stack frames or series on top of each other.</p>
<div id="exm-data-concat" class="theorem example" data-chapter="1" data-description="Concatenating data in pandas" type="💻">
<p><span class="theorem-title"><strong>Example 1.22</strong></span> Here we create two frames with three rows each and some commonly named columns:</p>
<div id="aefc8a8e" class="cell" data-execution_count="97">
<div class="sourceCode cell-code" id="cb173"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb173-1"><a href="#cb173-1" aria-hidden="true" tabindex="-1"></a>birds <span class="op">=</span> pd.DataFrame(</span>
<span id="cb173-2"><a href="#cb173-2" aria-hidden="true" tabindex="-1"></a>    {</span>
<span id="cb173-3"><a href="#cb173-3" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Name"</span>: [<span class="st">"Eagles"</span>, <span class="st">"Crows"</span>, <span class="st">"Falcons"</span>],</span>
<span id="cb173-4"><a href="#cb173-4" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Predatory"</span>: [<span class="va">True</span>, <span class="va">False</span>, <span class="va">True</span>],</span>
<span id="cb173-5"><a href="#cb173-5" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Family"</span>: [<span class="st">"Accipitridae"</span>, <span class="st">"Corvidae"</span>, <span class="st">"Falconidae"</span>],</span>
<span id="cb173-6"><a href="#cb173-6" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Color"</span>: [<span class="st">"Brown"</span>, <span class="st">"Black"</span>, <span class="st">"Blue–Gray"</span>]</span>
<span id="cb173-7"><a href="#cb173-7" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb173-8"><a href="#cb173-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb173-9"><a href="#cb173-9" aria-hidden="true" tabindex="-1"></a>birds</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="96">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Name</th>
<th data-quarto-table-cell-role="th">Predatory</th>
<th data-quarto-table-cell-role="th">Family</th>
<th data-quarto-table-cell-role="th">Color</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Eagles</td>
<td>True</td>
<td>Accipitridae</td>
<td>Brown</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Crows</td>
<td>False</td>
<td>Corvidae</td>
<td>Black</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Falcons</td>
<td>True</td>
<td>Falconidae</td>
<td>Blue–Gray</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div id="0fcac1c4" class="cell" data-execution_count="98">
<div class="sourceCode cell-code" id="cb174"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb174-1"><a href="#cb174-1" aria-hidden="true" tabindex="-1"></a>teams <span class="op">=</span> pd.DataFrame(</span>
<span id="cb174-2"><a href="#cb174-2" aria-hidden="true" tabindex="-1"></a>    {</span>
<span id="cb174-3"><a href="#cb174-3" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Name"</span>: [<span class="st">"Falcons"</span>, <span class="st">"Eagles"</span>, <span class="st">"Bears"</span>],</span>
<span id="cb174-4"><a href="#cb174-4" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Home"</span>: [<span class="st">"Atlanta"</span>, <span class="st">"Philadelphia"</span>, <span class="st">"Chicago"</span>],</span>
<span id="cb174-5"><a href="#cb174-5" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Color"</span>: [<span class="st">"Red"</span>, <span class="st">"Green"</span>, <span class="st">"Blue"</span>]</span>
<span id="cb174-6"><a href="#cb174-6" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb174-7"><a href="#cb174-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb174-8"><a href="#cb174-8" aria-hidden="true" tabindex="-1"></a>teams</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="97">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Name</th>
<th data-quarto-table-cell-role="th">Home</th>
<th data-quarto-table-cell-role="th">Color</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Falcons</td>
<td>Atlanta</td>
<td>Red</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Eagles</td>
<td>Philadelphia</td>
<td>Green</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Bears</td>
<td>Chicago</td>
<td>Blue</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>We can use <code>pd.concat()</code> to stack these frames on top of each other:</p>
<div id="6e29ceb9" class="cell" data-execution_count="99">
<div class="sourceCode cell-code" id="cb175"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb175-1"><a href="#cb175-1" aria-hidden="true" tabindex="-1"></a>pd.concat([birds, teams])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="98">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Name</th>
<th data-quarto-table-cell-role="th">Predatory</th>
<th data-quarto-table-cell-role="th">Family</th>
<th data-quarto-table-cell-role="th">Color</th>
<th data-quarto-table-cell-role="th">Home</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Eagles</td>
<td>True</td>
<td>Accipitridae</td>
<td>Brown</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Crows</td>
<td>False</td>
<td>Corvidae</td>
<td>Black</td>
<td>NaN</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Falcons</td>
<td>True</td>
<td>Falconidae</td>
<td>Blue–Gray</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">0</td>
<td>Falcons</td>
<td>NaN</td>
<td>NaN</td>
<td>Red</td>
<td>Atlanta</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">1</td>
<td>Eagles</td>
<td>NaN</td>
<td>NaN</td>
<td>Green</td>
<td>Philadelphia</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2</td>
<td>Bears</td>
<td>NaN</td>
<td>NaN</td>
<td>Blue</td>
<td>Chicago</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>Notice above that any value that wasn’t defined in the source frames ends up as a missing value in the result.</p>
<p>We can also concatenate the frames side by side by using the <code>axis</code> keyword:</p>
<div id="5c825c2f" class="cell" data-execution_count="100">
<div class="sourceCode cell-code" id="cb176"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb176-1"><a href="#cb176-1" aria-hidden="true" tabindex="-1"></a>pd.concat([birds, teams], axis<span class="op">=</span><span class="st">"columns"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="99">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Name</th>
<th data-quarto-table-cell-role="th">Predatory</th>
<th data-quarto-table-cell-role="th">Family</th>
<th data-quarto-table-cell-role="th">Color</th>
<th data-quarto-table-cell-role="th">Name</th>
<th data-quarto-table-cell-role="th">Home</th>
<th data-quarto-table-cell-role="th">Color</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Eagles</td>
<td>True</td>
<td>Accipitridae</td>
<td>Brown</td>
<td>Falcons</td>
<td>Atlanta</td>
<td>Red</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Crows</td>
<td>False</td>
<td>Corvidae</td>
<td>Black</td>
<td>Eagles</td>
<td>Philadelphia</td>
<td>Green</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Falcons</td>
<td>True</td>
<td>Falconidae</td>
<td>Blue–Gray</td>
<td>Bears</td>
<td>Chicago</td>
<td>Blue</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>The result is just a dumb pasting together of the source frames. There is no attempt to make the entries of the <em>Name</em> column match up, even though there were some overlapping values in it.</p>
</div>

<div class="no-row-height column-margin column-container"><div class="">
<div style="max-width:400px">
<div style="position:relative;padding-bottom:71.25%">
<iframe id="kaltura_player" src="https://cdnapisec.kaltura.com/p/2358381/sp/235838100/embedIframeJs/uiconf_id/43030021/partner_id/2358381?iframeembed=true&amp;playerId=kaltura_player&amp;entry_id=1_c8600g1g&amp;flashvars[streamerType]=auto&amp;flashvars[localizationCode]=en&amp;flashvars[sideBarContainer.plugin]=true&amp;flashvars[sideBarContainer.position]=left&amp;flashvars[sideBarContainer.clickToClose]=true&amp;flashvars[chapters.plugin]=true&amp;flashvars[chapters.layout]=vertical&amp;flashvars[chapters.thumbnailRotator]=false&amp;flashvars[streamSelector.plugin]=true&amp;flashvars[EmbedPlayer.SpinnerTarget]=videoHolder&amp;flashvars[dualScreen.plugin]=true&amp;flashvars[hotspots.plugin]=1&amp;flashvars[Kaltura.addCrossoriginToIframe]=true&amp;&amp;wid=1_d1o2jjd3" width="400" height="285" allowfullscreen="" webkitallowfullscreen="" mozallowfullscreen="" allow="autoplay *; fullscreen *; encrypted-media *" sandbox="allow-downloads allow-forms allow-same-origin allow-scripts allow-top-navigation allow-pointer-lock allow-popups allow-modals allow-orientation-lock allow-popups-to-escape-sandbox allow-presentation allow-top-navigation-by-user-activation" frameborder="0" title="Example 1.22" style="position:absolute;top:0;left:0;width:100%;height:100%;border:0">
</iframe>
</div>
</div>
</div></div><p>Concatenation is occasionally useful, but more often data frames should be joined horizontally using the more flexible <code>merge</code> method in the next section.</p>
</section>
<section id="merging-data" class="level3 page-columns page-full" data-number="1.7.2">
<h3 data-number="1.7.2" class="anchored" data-anchor-id="merging-data"><span class="header-section-number">1.7.2</span> Merging data</h3>
<p>The <code>merge</code> function is used to merge frames based on the values within the columns. Generically, each source frame can have a <em>key</em> column that is used to match up rows.</p>
<div id="exm-data-merge" class="theorem example" data-chapter="1" data-description="Merging data in pandas" type="💻">
<p><span class="theorem-title"><strong>Example 1.23</strong></span> Continuing with the data frames from <a href="#exm-data-concat" class="quarto-xref">Example&nbsp;<span>1.22</span></a>:</p>
<div id="401610a5" class="cell" data-execution_count="101">
<div class="sourceCode cell-code" id="cb177"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb177-1"><a href="#cb177-1" aria-hidden="true" tabindex="-1"></a>pd.merge(birds, teams, on<span class="op">=</span><span class="st">"Name"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="100">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Name</th>
<th data-quarto-table-cell-role="th">Predatory</th>
<th data-quarto-table-cell-role="th">Family</th>
<th data-quarto-table-cell-role="th">Color_x</th>
<th data-quarto-table-cell-role="th">Home</th>
<th data-quarto-table-cell-role="th">Color_y</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Eagles</td>
<td>True</td>
<td>Accipitridae</td>
<td>Brown</td>
<td>Philadelphia</td>
<td>Green</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Falcons</td>
<td>True</td>
<td>Falconidae</td>
<td>Blue–Gray</td>
<td>Atlanta</td>
<td>Red</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>The <code>on</code> keyword specifies the column that is the key for the merge. In the above merge, the result is a frame with only the rows that have a common value in the <code>Name</code> column. That’s called an <strong>inner join</strong>, which is the default. An alternative is an <strong>outer join</strong>, which includes all rows from both frames:</p>
<div id="ad90124e" class="cell" data-execution_count="102">
<div class="sourceCode cell-code" id="cb178"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb178-1"><a href="#cb178-1" aria-hidden="true" tabindex="-1"></a>pd.merge(birds, teams, on<span class="op">=</span><span class="st">"Name"</span>, how<span class="op">=</span><span class="st">"outer"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="101">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Name</th>
<th data-quarto-table-cell-role="th">Predatory</th>
<th data-quarto-table-cell-role="th">Family</th>
<th data-quarto-table-cell-role="th">Color_x</th>
<th data-quarto-table-cell-role="th">Home</th>
<th data-quarto-table-cell-role="th">Color_y</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Bears</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>Chicago</td>
<td>Blue</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Crows</td>
<td>False</td>
<td>Corvidae</td>
<td>Black</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Eagles</td>
<td>True</td>
<td>Accipitridae</td>
<td>Brown</td>
<td>Philadelphia</td>
<td>Green</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>Falcons</td>
<td>True</td>
<td>Falconidae</td>
<td>Blue–Gray</td>
<td>Atlanta</td>
<td>Red</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>Note also above that the column <code>Color</code> that appeared in both of the source frames was renamed to <code>Color_x</code> and <code>Color_y</code> in the result, since otherwise there would be a conflict.</p>
<p>It’s also possible to do a <strong>left join</strong> or a <strong>right join</strong>, which use one of the original frames as the basis for the result:</p>
<div id="d0e52fc4" class="cell" data-execution_count="103">
<div class="sourceCode cell-code" id="cb179"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb179-1"><a href="#cb179-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Left merge:"</span>)</span>
<span id="cb179-2"><a href="#cb179-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(pd.merge(birds, teams, on<span class="op">=</span><span class="st">"Name"</span>, how<span class="op">=</span><span class="st">"left"</span>))</span>
<span id="cb179-3"><a href="#cb179-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">Right merge:"</span>)</span>
<span id="cb179-4"><a href="#cb179-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(pd.merge(birds, teams, on<span class="op">=</span><span class="st">"Name"</span>, how<span class="op">=</span><span class="st">"right"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Left merge:
      Name  Predatory        Family    Color_x          Home Color_y
0   Eagles       True  Accipitridae      Brown  Philadelphia   Green
1    Crows      False      Corvidae      Black           NaN     NaN
2  Falcons       True    Falconidae  Blue–Gray       Atlanta     Red

Right merge:
      Name Predatory        Family    Color_x          Home Color_y
0  Falcons      True    Falconidae  Blue–Gray       Atlanta     Red
1   Eagles      True  Accipitridae      Brown  Philadelphia   Green
2    Bears       NaN           NaN        NaN       Chicago    Blue</code></pre>
</div>
</div>
</div>

<div class="no-row-height column-margin column-container"><div class="">
<div style="max-width:400px">
<div style="position:relative;padding-bottom:71.25%">
<iframe id="kaltura_player" src="https://cdnapisec.kaltura.com/p/2358381/sp/235838100/embedIframeJs/uiconf_id/43030021/partner_id/2358381?iframeembed=true&amp;playerId=kaltura_player&amp;entry_id=1_8brlfsj0&amp;flashvars[streamerType]=auto&amp;flashvars[localizationCode]=en&amp;flashvars[sideBarContainer.plugin]=true&amp;flashvars[sideBarContainer.position]=left&amp;flashvars[sideBarContainer.clickToClose]=true&amp;flashvars[chapters.plugin]=true&amp;flashvars[chapters.layout]=vertical&amp;flashvars[chapters.thumbnailRotator]=false&amp;flashvars[streamSelector.plugin]=true&amp;flashvars[EmbedPlayer.SpinnerTarget]=videoHolder&amp;flashvars[dualScreen.plugin]=true&amp;flashvars[hotspots.plugin]=1&amp;flashvars[Kaltura.addCrossoriginToIframe]=true&amp;&amp;wid=1_msgvrd2u" width="400" height="285" allowfullscreen="" webkitallowfullscreen="" mozallowfullscreen="" allow="autoplay *; fullscreen *; encrypted-media *" sandbox="allow-downloads allow-forms allow-same-origin allow-scripts allow-top-navigation allow-pointer-lock allow-popups allow-modals allow-orientation-lock allow-popups-to-escape-sandbox allow-presentation allow-top-navigation-by-user-activation" frameborder="0" title="Example 1.23" style="position:absolute;top:0;left:0;width:100%;height:100%;border:0">
</iframe>
</div>
</div>
<p><br><br></p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="_media/memes/join.jpg" class="lightbox" data-gallery="quarto-lightbox-gallery-9"><img src="_media/memes/join.jpg" class="img-fluid quarto-figure quarto-figure-center figure-img" width="200"></a></p>
</figure>
</div>
</div></div><div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>The difference between outer join and inner join is the same as the union and intersection of sets—the sets here being the <code>"on"</code> column contents.</p>
</div>
</div>
<div id="exm-data-merge-weather" class="theorem example" data-chapter="1" data-description="Merging data" type="💻">
<p><span class="theorem-title"><strong>Example 1.24</strong></span> Here we load in weather data for Newark, DE, being sure that the column representing the date is parsed as dates:</p>
<div id="4c10c2cb" class="cell" data-execution_count="104">
<div class="sourceCode cell-code" id="cb181"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb181-1"><a href="#cb181-1" aria-hidden="true" tabindex="-1"></a>weather <span class="op">=</span> pd.read_csv(<span class="st">"_datasets/ghcn_newark.csv"</span>, parse_dates<span class="op">=</span>[<span class="st">"DATE"</span>])</span>
<span id="cb181-2"><a href="#cb181-2" aria-hidden="true" tabindex="-1"></a>weather <span class="op">=</span> weather[[<span class="st">"DATE"</span>, <span class="st">"PRCP"</span>, <span class="st">"SNOW"</span>, <span class="st">"TMAX"</span>, <span class="st">"TMIN"</span>]]</span>
<span id="cb181-3"><a href="#cb181-3" aria-hidden="true" tabindex="-1"></a>weather.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="103">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">DATE</th>
<th data-quarto-table-cell-role="th">PRCP</th>
<th data-quarto-table-cell-role="th">SNOW</th>
<th data-quarto-table-cell-role="th">TMAX</th>
<th data-quarto-table-cell-role="th">TMIN</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>1894-04-01</td>
<td>0.0</td>
<td>NaN</td>
<td>189.0</td>
<td>111.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>1894-04-02</td>
<td>0.0</td>
<td>NaN</td>
<td>133.0</td>
<td>22.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>1894-04-03</td>
<td>0.0</td>
<td>NaN</td>
<td>89.0</td>
<td>-61.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>1894-04-04</td>
<td>165.0</td>
<td>NaN</td>
<td>117.0</td>
<td>17.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>1894-04-05</td>
<td>0.0</td>
<td>NaN</td>
<td>156.0</td>
<td>56.0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>Here is another data frame for the S&amp;P 500 stock market index:</p>
<div id="00b63347" class="cell" data-execution_count="105">
<div class="sourceCode cell-code" id="cb182"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb182-1"><a href="#cb182-1" aria-hidden="true" tabindex="-1"></a>sp500 <span class="op">=</span> pd.read_csv(<span class="st">"_datasets/SP500_daily.csv"</span>, parse_dates<span class="op">=</span>[<span class="st">"Date"</span>])</span>
<span id="cb182-2"><a href="#cb182-2" aria-hidden="true" tabindex="-1"></a>sp500[<span class="st">"Gain"</span>] <span class="op">=</span> sp500[<span class="st">"Close/Last"</span>] <span class="op">-</span> sp500[<span class="st">"Open"</span>]</span>
<span id="cb182-3"><a href="#cb182-3" aria-hidden="true" tabindex="-1"></a>sp500.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="104">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Date</th>
<th data-quarto-table-cell-role="th">Close/Last</th>
<th data-quarto-table-cell-role="th">Open</th>
<th data-quarto-table-cell-role="th">High</th>
<th data-quarto-table-cell-role="th">Low</th>
<th data-quarto-table-cell-role="th">Gain</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>2024-03-05</td>
<td>5078.65</td>
<td>5110.52</td>
<td>5114.54</td>
<td>5056.82</td>
<td>-31.87</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>2024-03-04</td>
<td>5130.95</td>
<td>5130.99</td>
<td>5149.67</td>
<td>5127.18</td>
<td>-0.04</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>2024-03-01</td>
<td>5137.08</td>
<td>5098.51</td>
<td>5140.33</td>
<td>5094.16</td>
<td>38.57</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>2024-02-29</td>
<td>5096.27</td>
<td>5085.36</td>
<td>5104.99</td>
<td>5061.89</td>
<td>10.91</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>2024-02-28</td>
<td>5069.76</td>
<td>5067.20</td>
<td>5077.37</td>
<td>5058.35</td>
<td>2.56</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>Now we can merge the weather data with the stock data according to the date. Note that here, the key is named differently in the two frames:</p>
<div id="4c6c837c" class="cell" data-execution_count="106">
<div class="sourceCode cell-code" id="cb183"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb183-1"><a href="#cb183-1" aria-hidden="true" tabindex="-1"></a>merged <span class="op">=</span> pd.merge(sp500, weather, left_on<span class="op">=</span><span class="st">"Date"</span>, right_on<span class="op">=</span><span class="st">"DATE"</span>)</span>
<span id="cb183-2"><a href="#cb183-2" aria-hidden="true" tabindex="-1"></a>merged.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="105">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Date</th>
<th data-quarto-table-cell-role="th">Close/Last</th>
<th data-quarto-table-cell-role="th">Open</th>
<th data-quarto-table-cell-role="th">High</th>
<th data-quarto-table-cell-role="th">Low</th>
<th data-quarto-table-cell-role="th">Gain</th>
<th data-quarto-table-cell-role="th">DATE</th>
<th data-quarto-table-cell-role="th">PRCP</th>
<th data-quarto-table-cell-role="th">SNOW</th>
<th data-quarto-table-cell-role="th">TMAX</th>
<th data-quarto-table-cell-role="th">TMIN</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>2023-01-06</td>
<td>3895.08</td>
<td>3823.37</td>
<td>3906.19</td>
<td>3809.56</td>
<td>71.71</td>
<td>2023-01-06</td>
<td>0.0</td>
<td>NaN</td>
<td>89.0</td>
<td>33.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>2022-11-30</td>
<td>4080.11</td>
<td>3957.18</td>
<td>4080.11</td>
<td>3938.58</td>
<td>122.93</td>
<td>2022-11-30</td>
<td>97.0</td>
<td>NaN</td>
<td>128.0</td>
<td>6.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>2022-11-29</td>
<td>3957.63</td>
<td>3964.19</td>
<td>3976.77</td>
<td>3937.65</td>
<td>-6.56</td>
<td>2022-11-29</td>
<td>0.0</td>
<td>NaN</td>
<td>83.0</td>
<td>-22.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>2022-11-28</td>
<td>3963.94</td>
<td>4005.36</td>
<td>4012.27</td>
<td>3955.77</td>
<td>-41.42</td>
<td>2022-11-28</td>
<td>0.0</td>
<td>NaN</td>
<td>122.0</td>
<td>17.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>2022-11-25</td>
<td>4026.12</td>
<td>4023.34</td>
<td>4034.02</td>
<td>4020.76</td>
<td>2.78</td>
<td>2022-11-25</td>
<td>13.0</td>
<td>NaN</td>
<td>150.0</td>
<td>6.0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>Since we did an inner join, only the rows with a common date in both frames are included:</p>
<div id="00a0e0d3" class="cell" data-execution_count="107">
<div class="sourceCode cell-code" id="cb184"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb184-1"><a href="#cb184-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"There are"</span>, <span class="bu">len</span>(sp500), <span class="st">"rows in the S&amp;P 500 data."</span>)</span>
<span id="cb184-2"><a href="#cb184-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"There are"</span>, <span class="bu">len</span>(weather), <span class="st">"rows in the weather data."</span>)</span>
<span id="cb184-3"><a href="#cb184-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"There are"</span>, <span class="bu">len</span>(merged), <span class="st">"rows in the inner-merged data."</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>There are 1259 rows in the S&amp;P 500 data.
There are 29517 rows in the weather data.
There are 820 rows in the inner-merged data.</code></pre>
</div>
</div>
<p>If the key you want to merge on is the index column, the syntax of the merge changes a little. Here is an example:</p>
<div id="56741101" class="cell" data-execution_count="108">
<div class="sourceCode cell-code" id="cb186"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb186-1"><a href="#cb186-1" aria-hidden="true" tabindex="-1"></a>weather <span class="op">=</span> weather.set_index(<span class="st">"DATE"</span>)</span>
<span id="cb186-2"><a href="#cb186-2" aria-hidden="true" tabindex="-1"></a>weather.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="107">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">PRCP</th>
<th data-quarto-table-cell-role="th">SNOW</th>
<th data-quarto-table-cell-role="th">TMAX</th>
<th data-quarto-table-cell-role="th">TMIN</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">DATE</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">1894-04-01</td>
<td>0.0</td>
<td>NaN</td>
<td>189.0</td>
<td>111.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1894-04-02</td>
<td>0.0</td>
<td>NaN</td>
<td>133.0</td>
<td>22.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">1894-04-03</td>
<td>0.0</td>
<td>NaN</td>
<td>89.0</td>
<td>-61.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1894-04-04</td>
<td>165.0</td>
<td>NaN</td>
<td>117.0</td>
<td>17.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">1894-04-05</td>
<td>0.0</td>
<td>NaN</td>
<td>156.0</td>
<td>56.0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div id="9b6a77fc" class="cell" data-execution_count="109">
<div class="sourceCode cell-code" id="cb187"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb187-1"><a href="#cb187-1" aria-hidden="true" tabindex="-1"></a>result <span class="op">=</span> pd.merge(sp500, weather, left_on<span class="op">=</span><span class="st">"Date"</span>, right_index<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb187-2"><a href="#cb187-2" aria-hidden="true" tabindex="-1"></a>result.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="108">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Date</th>
<th data-quarto-table-cell-role="th">Close/Last</th>
<th data-quarto-table-cell-role="th">Open</th>
<th data-quarto-table-cell-role="th">High</th>
<th data-quarto-table-cell-role="th">Low</th>
<th data-quarto-table-cell-role="th">Gain</th>
<th data-quarto-table-cell-role="th">PRCP</th>
<th data-quarto-table-cell-role="th">SNOW</th>
<th data-quarto-table-cell-role="th">TMAX</th>
<th data-quarto-table-cell-role="th">TMIN</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">290</td>
<td>2023-01-06</td>
<td>3895.08</td>
<td>3823.37</td>
<td>3906.19</td>
<td>3809.56</td>
<td>71.71</td>
<td>0.0</td>
<td>NaN</td>
<td>89.0</td>
<td>33.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">315</td>
<td>2022-11-30</td>
<td>4080.11</td>
<td>3957.18</td>
<td>4080.11</td>
<td>3938.58</td>
<td>122.93</td>
<td>97.0</td>
<td>NaN</td>
<td>128.0</td>
<td>6.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">316</td>
<td>2022-11-29</td>
<td>3957.63</td>
<td>3964.19</td>
<td>3976.77</td>
<td>3937.65</td>
<td>-6.56</td>
<td>0.0</td>
<td>NaN</td>
<td>83.0</td>
<td>-22.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">317</td>
<td>2022-11-28</td>
<td>3963.94</td>
<td>4005.36</td>
<td>4012.27</td>
<td>3955.77</td>
<td>-41.42</td>
<td>0.0</td>
<td>NaN</td>
<td>122.0</td>
<td>17.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">318</td>
<td>2022-11-25</td>
<td>4026.12</td>
<td>4023.34</td>
<td>4034.02</td>
<td>4020.76</td>
<td>2.78</td>
<td>13.0</td>
<td>NaN</td>
<td>150.0</td>
<td>6.0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</div>
</section>
</section>
<section id="data-wrangling" class="level2 page-columns page-full" data-number="1.8">
<h2 data-number="1.8" class="anchored" data-anchor-id="data-wrangling"><span class="header-section-number">1.8</span> Data wrangling</h2>
<p>Raw data often needs to be manipulated into a useable format before algorithms can be applied. Preprocessing data so that it is suitable for machine analysis is known as <strong>data wrangling</strong>.</p>
<p>There are a number of frequently encountered tasks in data wrangling, including:</p>
<dl>
<dt>Cleaning</dt>
<dd>
Handling missing values, removing duplicates, correcting errors, and ensuring that data is in the right format.
</dd>
<dt>Encoding</dt>
<dd>
Converting categorical variables to numerical form.
</dd>
<dt>Transforming</dt>
<dd>
Normalizing, scaling, and encoding data (e.g., defining dummy variables).
</dd>
</dl>
<p>These are tasks that graphical and AI assistive tools can help with a great deal. When using such tools, have them generate code that reproduces its steps. That way, you have a definitive record of what was done and can reproduce or modify it later.</p>
<section id="missing-values" class="level3 page-columns page-full" data-number="1.8.1">
<h3 data-number="1.8.1" class="anchored" data-anchor-id="missing-values"><span class="header-section-number">1.8.1</span> Missing values</h3>
<p>One of the most commonly encountered snags found in real data sets are rows that have missing values. There is no universal way that such values are presented. A missing value may be indicated by a zero or nonsensical value, or with a string such as “n/a”, or just an empty cell. Within Python, it might be natural to represent missing values as <code>None</code>, but that is not a valid value for a NumPy array. It’s more flexible within pandas to use <code>np.nan</code>, which stands for “not a number”.</p>
<p>Most algorithms will fail when presented with missing values, so you must either remove or replace them.</p>
<p>For removal, the <code>dropna()</code> method deletes all rows that have missing values. By default, it does this to a new copy of the data frame, so you must assign the result to a variable. Alternatively, you can use the argument <code>inplace=True</code> to modify the original frame. When applying <code>dropna()</code>, you may want to limit its scope to a subset of columns by using the <code>subset</code> argument with a list of columns.</p>
<p>Replacement of missing values is called <strong>imputation</strong>. The <code>fillna()</code> method makes it easy to use the mean, median, or mode of the non-missing values in a column. Doing so allows you to avoid data loss, but you should be cautious about imputation, because it can easily misrepresent the underlying data. At the very least, you need to document how many values have been changed.</p>
<div id="exm-data-missing" class="theorem example" data-chapter="1" data-description="Handling missing values in pandas" type="💻">
<p><span class="theorem-title"><strong>Example 1.25</strong></span> Here is a well-known demonstration data set often referred to as <em>Palmer Penguins</em>:</p>
<div id="478a8bc8" class="cell" data-execution_count="110">
<div class="sourceCode cell-code" id="cb188"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb188-1"><a href="#cb188-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb188-2"><a href="#cb188-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb188-3"><a href="#cb188-3" aria-hidden="true" tabindex="-1"></a>penguins <span class="op">=</span> sns.load_dataset(<span class="st">"penguins"</span>)</span>
<span id="cb188-4"><a href="#cb188-4" aria-hidden="true" tabindex="-1"></a>penguins.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="109">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">species</th>
<th data-quarto-table-cell-role="th">island</th>
<th data-quarto-table-cell-role="th">bill_length_mm</th>
<th data-quarto-table-cell-role="th">bill_depth_mm</th>
<th data-quarto-table-cell-role="th">flipper_length_mm</th>
<th data-quarto-table-cell-role="th">body_mass_g</th>
<th data-quarto-table-cell-role="th">sex</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Adelie</td>
<td>Torgersen</td>
<td>39.1</td>
<td>18.7</td>
<td>181.0</td>
<td>3750.0</td>
<td>Male</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Adelie</td>
<td>Torgersen</td>
<td>39.5</td>
<td>17.4</td>
<td>186.0</td>
<td>3800.0</td>
<td>Female</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Adelie</td>
<td>Torgersen</td>
<td>40.3</td>
<td>18.0</td>
<td>195.0</td>
<td>3250.0</td>
<td>Female</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>Adelie</td>
<td>Torgersen</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>Adelie</td>
<td>Torgersen</td>
<td>36.7</td>
<td>19.3</td>
<td>193.0</td>
<td>3450.0</td>
<td>Female</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>Note above that the fourth row of the frame is missing measurements. We can discover how many such rows there are using <code>isna</code>, which creates a Boolean series:</p>
<div id="7285f5d7" class="cell" data-execution_count="111">
<div class="sourceCode cell-code" id="cb189"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb189-1"><a href="#cb189-1" aria-hidden="true" tabindex="-1"></a>penguins.isna()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="110">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">species</th>
<th data-quarto-table-cell-role="th">island</th>
<th data-quarto-table-cell-role="th">bill_length_mm</th>
<th data-quarto-table-cell-role="th">bill_depth_mm</th>
<th data-quarto-table-cell-role="th">flipper_length_mm</th>
<th data-quarto-table-cell-role="th">body_mass_g</th>
<th data-quarto-table-cell-role="th">sex</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>False</td>
<td>False</td>
<td>False</td>
<td>False</td>
<td>False</td>
<td>False</td>
<td>False</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>False</td>
<td>False</td>
<td>False</td>
<td>False</td>
<td>False</td>
<td>False</td>
<td>False</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>False</td>
<td>False</td>
<td>False</td>
<td>False</td>
<td>False</td>
<td>False</td>
<td>False</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>False</td>
<td>False</td>
<td>True</td>
<td>True</td>
<td>True</td>
<td>True</td>
<td>True</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>False</td>
<td>False</td>
<td>False</td>
<td>False</td>
<td>False</td>
<td>False</td>
<td>False</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">339</td>
<td>False</td>
<td>False</td>
<td>True</td>
<td>True</td>
<td>True</td>
<td>True</td>
<td>True</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">340</td>
<td>False</td>
<td>False</td>
<td>False</td>
<td>False</td>
<td>False</td>
<td>False</td>
<td>False</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">341</td>
<td>False</td>
<td>False</td>
<td>False</td>
<td>False</td>
<td>False</td>
<td>False</td>
<td>False</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">342</td>
<td>False</td>
<td>False</td>
<td>False</td>
<td>False</td>
<td>False</td>
<td>False</td>
<td>False</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">343</td>
<td>False</td>
<td>False</td>
<td>False</td>
<td>False</td>
<td>False</td>
<td>False</td>
<td>False</td>
</tr>
</tbody>
</table>

<p>344 rows × 7 columns</p>
</div>
</div>
</div>
<p>The total number of rows with missing data is</p>
<div id="64cb07a5" class="cell" data-execution_count="112">
<div class="sourceCode cell-code" id="cb190"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb190-1"><a href="#cb190-1" aria-hidden="true" tabindex="-1"></a>penguins.isna().<span class="bu">sum</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="111">
<pre><code>species               0
island                0
bill_length_mm        2
bill_depth_mm         2
flipper_length_mm     2
body_mass_g           2
sex                  11
dtype: int64</code></pre>
</div>
</div>
<p>To drop the rows with missing values, you can use <code>dropna()</code>:</p>
<div id="31e71e38" class="cell" data-execution_count="113">
<div class="sourceCode cell-code" id="cb192"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb192-1"><a href="#cb192-1" aria-hidden="true" tabindex="-1"></a>dropped <span class="op">=</span> penguins.dropna()</span>
<span id="cb192-2"><a href="#cb192-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Original has"</span>, <span class="bu">len</span>(penguins), <span class="st">"rows."</span>)</span>
<span id="cb192-3"><a href="#cb192-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"After removals, there are"</span>, <span class="bu">len</span>(dropped), <span class="st">"rows."</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Original has 344 rows.
After removals, there are 333 rows.</code></pre>
</div>
</div>
<p>If you want to impute missing values, you can use <code>fillna()</code>. Here, for example, we replace missing values in any quantitative column with the mean of the column:</p>
<div id="26429be6" class="cell" data-execution_count="114">
<div class="sourceCode cell-code" id="cb194"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb194-1"><a href="#cb194-1" aria-hidden="true" tabindex="-1"></a>filled <span class="op">=</span> penguins.copy()</span>
<span id="cb194-2"><a href="#cb194-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> col <span class="kw">in</span> penguins.select_dtypes(np.number).columns:</span>
<span id="cb194-3"><a href="#cb194-3" aria-hidden="true" tabindex="-1"></a>    filled[col].fillna(penguins[col].mean(), inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb194-4"><a href="#cb194-4" aria-hidden="true" tabindex="-1"></a>filled.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="113">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">species</th>
<th data-quarto-table-cell-role="th">island</th>
<th data-quarto-table-cell-role="th">bill_length_mm</th>
<th data-quarto-table-cell-role="th">bill_depth_mm</th>
<th data-quarto-table-cell-role="th">flipper_length_mm</th>
<th data-quarto-table-cell-role="th">body_mass_g</th>
<th data-quarto-table-cell-role="th">sex</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Adelie</td>
<td>Torgersen</td>
<td>39.10000</td>
<td>18.70000</td>
<td>181.000000</td>
<td>3750.000000</td>
<td>Male</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Adelie</td>
<td>Torgersen</td>
<td>39.50000</td>
<td>17.40000</td>
<td>186.000000</td>
<td>3800.000000</td>
<td>Female</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Adelie</td>
<td>Torgersen</td>
<td>40.30000</td>
<td>18.00000</td>
<td>195.000000</td>
<td>3250.000000</td>
<td>Female</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>Adelie</td>
<td>Torgersen</td>
<td>43.92193</td>
<td>17.15117</td>
<td>200.915205</td>
<td>4201.754386</td>
<td>NaN</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>Adelie</td>
<td>Torgersen</td>
<td>36.70000</td>
<td>19.30000</td>
<td>193.000000</td>
<td>3450.000000</td>
<td>Female</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>Note that, for example, the categorical column for <em>sex</em> was left alone and still contains missing values.</p>
</div>

<div class="no-row-height column-margin column-container"><div class="">
<div style="max-width:400px">
<div style="position:relative;padding-bottom:71.25%">
<iframe id="kaltura_player" src="https://cdnapisec.kaltura.com/p/2358381/sp/235838100/embedIframeJs/uiconf_id/43030021/partner_id/2358381?iframeembed=true&amp;playerId=kaltura_player&amp;entry_id=1_1yoo56s2&amp;flashvars[streamerType]=auto&amp;flashvars[localizationCode]=en&amp;flashvars[sideBarContainer.plugin]=true&amp;flashvars[sideBarContainer.position]=left&amp;flashvars[sideBarContainer.clickToClose]=true&amp;flashvars[chapters.plugin]=true&amp;flashvars[chapters.layout]=vertical&amp;flashvars[chapters.thumbnailRotator]=false&amp;flashvars[streamSelector.plugin]=true&amp;flashvars[EmbedPlayer.SpinnerTarget]=videoHolder&amp;flashvars[dualScreen.plugin]=true&amp;flashvars[hotspots.plugin]=1&amp;flashvars[Kaltura.addCrossoriginToIframe]=true&amp;&amp;wid=1_s9rb8i4t" width="400" height="285" allowfullscreen="" webkitallowfullscreen="" mozallowfullscreen="" allow="autoplay *; fullscreen *; encrypted-media *" sandbox="allow-downloads allow-forms allow-same-origin allow-scripts allow-top-navigation allow-pointer-lock allow-popups allow-modals allow-orientation-lock allow-popups-to-escape-sandbox allow-presentation allow-top-navigation-by-user-activation" frameborder="0" title="Example 1.25" style="position:absolute;top:0;left:0;width:100%;height:100%;border:0">
</iframe>
</div>
</div>
<p><br><br> <a href="_media/memes/missing.jpg" class="lightbox" data-gallery="quarto-lightbox-gallery-10"><img src="_media/memes/missing.jpg" class="img-fluid quarto-figure quarto-figure-center" width="200"></a></p>
</div></div></section>
<section id="strings" class="level3 page-columns page-full" data-number="1.8.2">
<h3 data-number="1.8.2" class="anchored" data-anchor-id="strings"><span class="header-section-number">1.8.2</span> Strings</h3>
<p>A common pitfall is that data that seems numerical to you might be parsed as strings by pandas. This happens when there are non-numeric characters in the data, such as dollar signs or percent signs, and any row with such a character will cause the whole column to be interpreted as strings.</p>
<div id="exm-data-loans" class="theorem example" data-chapter="1" data-description="Cleaning a data frame" type="💻">
<p><span class="theorem-title"><strong>Example 1.26</strong></span> To demonstrate algorithms in later sections, we will be using a <a href="https://www.kaggle.com/datasets/imsparsh/lending-club-loan-dataset-2007-2011">dataset describing loans</a> made on the crowdfunding site LendingClub. For this example, we’ll keep only a few columns.</p>
<div id="df821264" class="cell" data-execution_count="115">
<div class="sourceCode cell-code" id="cb195"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb195-1"><a href="#cb195-1" aria-hidden="true" tabindex="-1"></a>loans <span class="op">=</span> pd.read_csv(<span class="st">"_datasets/loans.csv"</span>)</span>
<span id="cb195-2"><a href="#cb195-2" aria-hidden="true" tabindex="-1"></a>loans <span class="op">=</span> loans[[<span class="st">"loan_amnt"</span>, <span class="st">"funded_amnt"</span>, <span class="st">"int_rate"</span>, <span class="st">"title"</span>]]</span>
<span id="cb195-3"><a href="#cb195-3" aria-hidden="true" tabindex="-1"></a>loans.head(<span class="dv">8</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="114">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">loan_amnt</th>
<th data-quarto-table-cell-role="th">funded_amnt</th>
<th data-quarto-table-cell-role="th">int_rate</th>
<th data-quarto-table-cell-role="th">title</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>5000</td>
<td>5000</td>
<td>10.65%</td>
<td>Computer</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>2500</td>
<td>2500</td>
<td>15.27%</td>
<td>bike</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>2400</td>
<td>2400</td>
<td>15.96%</td>
<td>real estate business</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>10000</td>
<td>10000</td>
<td>13.49%</td>
<td>personel</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>3000</td>
<td>3000</td>
<td>12.69%</td>
<td>Personal</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">5</td>
<td>5000</td>
<td>5000</td>
<td>7.90%</td>
<td>My wedding loan I promise to pay back</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">6</td>
<td>7000</td>
<td>7000</td>
<td>15.96%</td>
<td>Loan</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">7</td>
<td>3000</td>
<td>3000</td>
<td>18.64%</td>
<td>Car Downpayment</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>The <code>int_rate</code> column, which gives the interest rate on the loan, has been interpreted as strings due to the percent sign. We’d like to strip out those percent signs and convert the rest to numeric types. We can use the <code>str</code> property of the column to access string methods:</p>
<div id="1113abc2" class="cell" data-execution_count="116">
<div class="sourceCode cell-code" id="cb196"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb196-1"><a href="#cb196-1" aria-hidden="true" tabindex="-1"></a>int_rate <span class="op">=</span> loans[<span class="st">"int_rate"</span>].<span class="bu">str</span>.strip(<span class="st">'%'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Then, we can convert the result to numbers:</p>
<div id="dc53020c" class="cell" data-execution_count="117">
<div class="sourceCode cell-code" id="cb197"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb197-1"><a href="#cb197-1" aria-hidden="true" tabindex="-1"></a>loans[<span class="st">"int_rate"</span>] <span class="op">=</span> pd.to_numeric( int_rate )</span>
<span id="cb197-2"><a href="#cb197-2" aria-hidden="true" tabindex="-1"></a>loans.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="116">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">loan_amnt</th>
<th data-quarto-table-cell-role="th">funded_amnt</th>
<th data-quarto-table-cell-role="th">int_rate</th>
<th data-quarto-table-cell-role="th">title</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>5000</td>
<td>5000</td>
<td>10.65</td>
<td>Computer</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>2500</td>
<td>2500</td>
<td>15.27</td>
<td>bike</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>2400</td>
<td>2400</td>
<td>15.96</td>
<td>real estate business</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>10000</td>
<td>10000</td>
<td>13.49</td>
<td>personel</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>3000</td>
<td>3000</td>
<td>12.69</td>
<td>Personal</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>The <em>title</em> column contains strings that are haphazardly formatted. We might want to convert everything in that column to lowercase:</p>
<div id="eb41ec71" class="cell" data-execution_count="118">
<div class="sourceCode cell-code" id="cb198"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb198-1"><a href="#cb198-1" aria-hidden="true" tabindex="-1"></a>loans[<span class="st">"title"</span>] <span class="op">=</span> loans[<span class="st">"title"</span>].<span class="bu">str</span>.lower()</span>
<span id="cb198-2"><a href="#cb198-2" aria-hidden="true" tabindex="-1"></a>loans.head(<span class="dv">8</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="117">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">loan_amnt</th>
<th data-quarto-table-cell-role="th">funded_amnt</th>
<th data-quarto-table-cell-role="th">int_rate</th>
<th data-quarto-table-cell-role="th">title</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>5000</td>
<td>5000</td>
<td>10.65</td>
<td>computer</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>2500</td>
<td>2500</td>
<td>15.27</td>
<td>bike</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>2400</td>
<td>2400</td>
<td>15.96</td>
<td>real estate business</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>10000</td>
<td>10000</td>
<td>13.49</td>
<td>personel</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>3000</td>
<td>3000</td>
<td>12.69</td>
<td>personal</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">5</td>
<td>5000</td>
<td>5000</td>
<td>7.90</td>
<td>my wedding loan i promise to pay back</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">6</td>
<td>7000</td>
<td>7000</td>
<td>15.96</td>
<td>loan</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">7</td>
<td>3000</td>
<td>3000</td>
<td>18.64</td>
<td>car downpayment</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</div>

<div class="no-row-height column-margin column-container"><div class="">
<div style="max-width:400px">
<div style="position:relative;padding-bottom:71.25%">
<iframe id="kaltura_player" src="https://cdnapisec.kaltura.com/p/2358381/sp/235838100/embedIframeJs/uiconf_id/43030021/partner_id/2358381?iframeembed=true&amp;playerId=kaltura_player&amp;entry_id=1_2ul0qp9u&amp;flashvars[streamerType]=auto&amp;flashvars[localizationCode]=en&amp;flashvars[sideBarContainer.plugin]=true&amp;flashvars[sideBarContainer.position]=left&amp;flashvars[sideBarContainer.clickToClose]=true&amp;flashvars[chapters.plugin]=true&amp;flashvars[chapters.layout]=vertical&amp;flashvars[chapters.thumbnailRotator]=false&amp;flashvars[streamSelector.plugin]=true&amp;flashvars[EmbedPlayer.SpinnerTarget]=videoHolder&amp;flashvars[dualScreen.plugin]=true&amp;flashvars[hotspots.plugin]=1&amp;flashvars[Kaltura.addCrossoriginToIframe]=true&amp;&amp;wid=1_wgjmc04r" width="400" height="285" allowfullscreen="" webkitallowfullscreen="" mozallowfullscreen="" allow="autoplay *; fullscreen *; encrypted-media *" sandbox="allow-downloads allow-forms allow-same-origin allow-scripts allow-top-navigation allow-pointer-lock allow-popups allow-modals allow-orientation-lock allow-popups-to-escape-sandbox allow-presentation allow-top-navigation-by-user-activation" frameborder="0" title="Example 1.26" style="position:absolute;top:0;left:0;width:100%;height:100%;border:0">
</iframe>
</div>
</div>
</div></div><p>You can look at the <a href="https://pandas.pydata.org/docs/user_guide/text.html#text-string-methods">pandas user guide</a> for a more thorough demonstration of string methods in pandas.</p>
</section>
<section id="encoding-qualitative-data" class="level3 page-columns page-full" data-number="1.8.3">
<h3 data-number="1.8.3" class="anchored" data-anchor-id="encoding-qualitative-data"><span class="header-section-number">1.8.3</span> Encoding qualitative data</h3>
<p>Most algorithms require numerical data. If you have qualitative data, you need to convert it to a numerical form. This is called <strong>encoding</strong>.</p>
<p>For a category with ordered values, it’s usually best to replace the categories with integers that reflect the ordering.</p>
<div id="exm-data-encoding" class="theorem example" data-chapter="1" data-description="Encoding qualitative data" type="💻">
<p><span class="theorem-title"><strong>Example 1.27</strong></span> This dataset contains information about diamonds:</p>
<div id="0bedd918" class="cell" data-execution_count="119">
<div class="sourceCode cell-code" id="cb199"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb199-1"><a href="#cb199-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb199-2"><a href="#cb199-2" aria-hidden="true" tabindex="-1"></a>diamonds <span class="op">=</span> sns.load_dataset(<span class="st">"diamonds"</span>)</span>
<span id="cb199-3"><a href="#cb199-3" aria-hidden="true" tabindex="-1"></a>diamonds.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="118">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">carat</th>
<th data-quarto-table-cell-role="th">cut</th>
<th data-quarto-table-cell-role="th">color</th>
<th data-quarto-table-cell-role="th">clarity</th>
<th data-quarto-table-cell-role="th">depth</th>
<th data-quarto-table-cell-role="th">table</th>
<th data-quarto-table-cell-role="th">price</th>
<th data-quarto-table-cell-role="th">x</th>
<th data-quarto-table-cell-role="th">y</th>
<th data-quarto-table-cell-role="th">z</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>0.23</td>
<td>Ideal</td>
<td>E</td>
<td>SI2</td>
<td>61.5</td>
<td>55.0</td>
<td>326</td>
<td>3.95</td>
<td>3.98</td>
<td>2.43</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>0.21</td>
<td>Premium</td>
<td>E</td>
<td>SI1</td>
<td>59.8</td>
<td>61.0</td>
<td>326</td>
<td>3.89</td>
<td>3.84</td>
<td>2.31</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>0.23</td>
<td>Good</td>
<td>E</td>
<td>VS1</td>
<td>56.9</td>
<td>65.0</td>
<td>327</td>
<td>4.05</td>
<td>4.07</td>
<td>2.31</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>0.29</td>
<td>Premium</td>
<td>I</td>
<td>VS2</td>
<td>62.4</td>
<td>58.0</td>
<td>334</td>
<td>4.20</td>
<td>4.23</td>
<td>2.63</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>0.31</td>
<td>Good</td>
<td>J</td>
<td>SI2</td>
<td>63.3</td>
<td>58.0</td>
<td>335</td>
<td>4.34</td>
<td>4.35</td>
<td>2.75</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>As you can see above, some of the features (<em>cut</em>, <em>color</em>, <em>clarity</em>) have string designations. We could convert <em>cut</em> to an ordinal categorical variable like so:</p>
<div id="1439376b" class="cell" data-execution_count="120">
<div class="sourceCode cell-code" id="cb200"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb200-1"><a href="#cb200-1" aria-hidden="true" tabindex="-1"></a>cuts <span class="op">=</span> [<span class="st">"Fair"</span>, <span class="st">"Good"</span>, <span class="st">"Very Good"</span>, <span class="st">"Premium"</span>, <span class="st">"Ideal"</span>]</span>
<span id="cb200-2"><a href="#cb200-2" aria-hidden="true" tabindex="-1"></a>cuts_cat <span class="op">=</span> pd.Categorical(diamonds[<span class="st">"cut"</span>], categories<span class="op">=</span>cuts, ordered<span class="op">=</span><span class="va">True</span>)  <span class="co"># ordinal</span></span>
<span id="cb200-3"><a href="#cb200-3" aria-hidden="true" tabindex="-1"></a>cuts_cat</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="119">
<pre><code>['Ideal', 'Premium', 'Good', 'Premium', 'Good', ..., 'Ideal', 'Good', 'Very Good', 'Premium', 'Ideal']
Length: 53940
Categories (5, object): ['Fair' &lt; 'Good' &lt; 'Very Good' &lt; 'Premium' &lt; 'Ideal']</code></pre>
</div>
</div>
<p>Replacing strings with categories in the <em>Cat</em> column makes no apparent change:</p>
<div id="26aaf533" class="cell" data-execution_count="121">
<div class="sourceCode cell-code" id="cb202"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb202-1"><a href="#cb202-1" aria-hidden="true" tabindex="-1"></a>diamonds[<span class="st">"cut"</span>] <span class="op">=</span> cuts_cat</span>
<span id="cb202-2"><a href="#cb202-2" aria-hidden="true" tabindex="-1"></a>diamonds.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="120">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">carat</th>
<th data-quarto-table-cell-role="th">cut</th>
<th data-quarto-table-cell-role="th">color</th>
<th data-quarto-table-cell-role="th">clarity</th>
<th data-quarto-table-cell-role="th">depth</th>
<th data-quarto-table-cell-role="th">table</th>
<th data-quarto-table-cell-role="th">price</th>
<th data-quarto-table-cell-role="th">x</th>
<th data-quarto-table-cell-role="th">y</th>
<th data-quarto-table-cell-role="th">z</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>0.23</td>
<td>Ideal</td>
<td>E</td>
<td>SI2</td>
<td>61.5</td>
<td>55.0</td>
<td>326</td>
<td>3.95</td>
<td>3.98</td>
<td>2.43</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>0.21</td>
<td>Premium</td>
<td>E</td>
<td>SI1</td>
<td>59.8</td>
<td>61.0</td>
<td>326</td>
<td>3.89</td>
<td>3.84</td>
<td>2.31</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>0.23</td>
<td>Good</td>
<td>E</td>
<td>VS1</td>
<td>56.9</td>
<td>65.0</td>
<td>327</td>
<td>4.05</td>
<td>4.07</td>
<td>2.31</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>0.29</td>
<td>Premium</td>
<td>I</td>
<td>VS2</td>
<td>62.4</td>
<td>58.0</td>
<td>334</td>
<td>4.20</td>
<td>4.23</td>
<td>2.63</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>0.31</td>
<td>Good</td>
<td>J</td>
<td>SI2</td>
<td>63.3</td>
<td>58.0</td>
<td>335</td>
<td>4.34</td>
<td>4.35</td>
<td>2.75</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>However, we could convert those values to integers with the same ordering:</p>
<div id="12e97dce" class="cell" data-execution_count="122">
<div class="sourceCode cell-code" id="cb203"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb203-1"><a href="#cb203-1" aria-hidden="true" tabindex="-1"></a>diamonds[<span class="st">"cut"</span>] <span class="op">=</span> cuts_cat.codes</span>
<span id="cb203-2"><a href="#cb203-2" aria-hidden="true" tabindex="-1"></a>diamonds.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="121">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">carat</th>
<th data-quarto-table-cell-role="th">cut</th>
<th data-quarto-table-cell-role="th">color</th>
<th data-quarto-table-cell-role="th">clarity</th>
<th data-quarto-table-cell-role="th">depth</th>
<th data-quarto-table-cell-role="th">table</th>
<th data-quarto-table-cell-role="th">price</th>
<th data-quarto-table-cell-role="th">x</th>
<th data-quarto-table-cell-role="th">y</th>
<th data-quarto-table-cell-role="th">z</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>0.23</td>
<td>4</td>
<td>E</td>
<td>SI2</td>
<td>61.5</td>
<td>55.0</td>
<td>326</td>
<td>3.95</td>
<td>3.98</td>
<td>2.43</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>0.21</td>
<td>3</td>
<td>E</td>
<td>SI1</td>
<td>59.8</td>
<td>61.0</td>
<td>326</td>
<td>3.89</td>
<td>3.84</td>
<td>2.31</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>0.23</td>
<td>1</td>
<td>E</td>
<td>VS1</td>
<td>56.9</td>
<td>65.0</td>
<td>327</td>
<td>4.05</td>
<td>4.07</td>
<td>2.31</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>0.29</td>
<td>3</td>
<td>I</td>
<td>VS2</td>
<td>62.4</td>
<td>58.0</td>
<td>334</td>
<td>4.20</td>
<td>4.23</td>
<td>2.63</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>0.31</td>
<td>1</td>
<td>J</td>
<td>SI2</td>
<td>63.3</td>
<td>58.0</td>
<td>335</td>
<td>4.34</td>
<td>4.35</td>
<td>2.75</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</div>
<p>For nominal categories that have no natural ordering, it’s typically best to encode via dummy variables rather than integers.</p>
<div id="exm-data-dummies" class="theorem example" data-chapter="1" data-description="Dummy variables in pandas" type="💻">
<p><span class="theorem-title"><strong>Example 1.28</strong></span> Here is a dataset of NBA player statistics from 2023–2024:</p>
<div id="3b068a23" class="cell" data-execution_count="123">
<div class="sourceCode cell-code" id="cb204"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb204-1"><a href="#cb204-1" aria-hidden="true" tabindex="-1"></a>nba <span class="op">=</span> pd.read_csv(<span class="st">"_datasets/NBA player stats 2023-24.csv"</span>)</span>
<span id="cb204-2"><a href="#cb204-2" aria-hidden="true" tabindex="-1"></a>nba.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="122">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">RANK</th>
<th data-quarto-table-cell-role="th">NAME</th>
<th data-quarto-table-cell-role="th">TEAM</th>
<th data-quarto-table-cell-role="th">POS</th>
<th data-quarto-table-cell-role="th">AGE</th>
<th data-quarto-table-cell-role="th">GP</th>
<th data-quarto-table-cell-role="th">MPG</th>
<th data-quarto-table-cell-role="th">USG%</th>
<th data-quarto-table-cell-role="th">TO%</th>
<th data-quarto-table-cell-role="th">FTA</th>
<th data-quarto-table-cell-role="th">...</th>
<th data-quarto-table-cell-role="th">APG</th>
<th data-quarto-table-cell-role="th">SPG</th>
<th data-quarto-table-cell-role="th">BPG</th>
<th data-quarto-table-cell-role="th">TPG</th>
<th data-quarto-table-cell-role="th">P+R</th>
<th data-quarto-table-cell-role="th">P+A</th>
<th data-quarto-table-cell-role="th">P+R+A</th>
<th data-quarto-table-cell-role="th">VI</th>
<th data-quarto-table-cell-role="th">ORtg</th>
<th data-quarto-table-cell-role="th">DRtg</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>NaN</td>
<td>Joel Embiid</td>
<td>Phi</td>
<td>C</td>
<td>30.2</td>
<td>6</td>
<td>41.4</td>
<td>35.7</td>
<td>15.8</td>
<td>78</td>
<td>...</td>
<td>5.7</td>
<td>1.2</td>
<td>1.5</td>
<td>4.2</td>
<td>43.8</td>
<td>38.7</td>
<td>49.5</td>
<td>12.2</td>
<td>117.1</td>
<td>108.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>NaN</td>
<td>Jalen Brunson</td>
<td>Nyk</td>
<td>G</td>
<td>27.8</td>
<td>13</td>
<td>39.8</td>
<td>36.4</td>
<td>9.3</td>
<td>120</td>
<td>...</td>
<td>7.5</td>
<td>0.8</td>
<td>0.2</td>
<td>2.7</td>
<td>35.7</td>
<td>39.8</td>
<td>43.2</td>
<td>9.3</td>
<td>114.8</td>
<td>114.7</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>NaN</td>
<td>Damian Lillard</td>
<td>Mil</td>
<td>G</td>
<td>33.9</td>
<td>4</td>
<td>39.1</td>
<td>31.4</td>
<td>10.0</td>
<td>38</td>
<td>...</td>
<td>5.0</td>
<td>1.0</td>
<td>0.0</td>
<td>2.3</td>
<td>34.5</td>
<td>36.3</td>
<td>39.5</td>
<td>8.2</td>
<td>127.6</td>
<td>115.7</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>NaN</td>
<td>Shai Gilgeous-Alexander</td>
<td>Okc</td>
<td>G</td>
<td>25.9</td>
<td>10</td>
<td>39.9</td>
<td>32.3</td>
<td>8.9</td>
<td>81</td>
<td>...</td>
<td>6.4</td>
<td>1.3</td>
<td>1.7</td>
<td>2.2</td>
<td>37.4</td>
<td>36.6</td>
<td>43.8</td>
<td>11.2</td>
<td>118.3</td>
<td>106.9</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>NaN</td>
<td>Tyrese Maxey</td>
<td>Phi</td>
<td>G</td>
<td>23.6</td>
<td>6</td>
<td>44.6</td>
<td>28.1</td>
<td>8.6</td>
<td>28</td>
<td>...</td>
<td>6.8</td>
<td>0.8</td>
<td>0.3</td>
<td>2.2</td>
<td>35.0</td>
<td>36.7</td>
<td>41.8</td>
<td>9.1</td>
<td>120.9</td>
<td>113.3</td>
</tr>
</tbody>
</table>

<p>5 rows × 29 columns</p>
</div>
</div>
</div>
<p>For this example, we will narrow the focus to the <em>NAME</em> and <em>POS</em> columns:</p>
<div id="8396c637" class="cell" data-execution_count="124">
<div class="sourceCode cell-code" id="cb205"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb205-1"><a href="#cb205-1" aria-hidden="true" tabindex="-1"></a>nba <span class="op">=</span> nba[[<span class="st">"NAME"</span>, <span class="st">"POS"</span>]]</span>
<span id="cb205-2"><a href="#cb205-2" aria-hidden="true" tabindex="-1"></a>nba.head(<span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="123">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">NAME</th>
<th data-quarto-table-cell-role="th">POS</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Joel Embiid</td>
<td>C</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Jalen Brunson</td>
<td>G</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Damian Lillard</td>
<td>G</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>Shai Gilgeous-Alexander</td>
<td>G</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>Tyrese Maxey</td>
<td>G</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">5</td>
<td>Donovan Mitchell</td>
<td>G</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">6</td>
<td>Luka Doncic</td>
<td>G</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">7</td>
<td>Nikola Jokic</td>
<td>C</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">8</td>
<td>LeBron James</td>
<td>F</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">9</td>
<td>Anthony Davis</td>
<td>C</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>The <em>POS</em> column is a categorical variable (the player’s position):</p>
<div id="04f9dab2" class="cell" data-execution_count="125">
<div class="sourceCode cell-code" id="cb206"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb206-1"><a href="#cb206-1" aria-hidden="true" tabindex="-1"></a>nba[<span class="st">"POS"</span>].unique()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="124">
<pre><code>array(['C', 'G', 'F', 'G-F', 'F-G', 'C-F', 'F-C'], dtype=object)</code></pre>
</div>
</div>
<p>We can use <code>pd.get_dummies</code> to convert this column to dummy variables:</p>
<div id="44a48d93" class="cell" data-execution_count="126">
<div class="sourceCode cell-code" id="cb208"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb208-1"><a href="#cb208-1" aria-hidden="true" tabindex="-1"></a>dum1 <span class="op">=</span> pd.get_dummies(nba[<span class="st">"POS"</span>])</span>
<span id="cb208-2"><a href="#cb208-2" aria-hidden="true" tabindex="-1"></a>dum1.head(<span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="125">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">C</th>
<th data-quarto-table-cell-role="th">C-F</th>
<th data-quarto-table-cell-role="th">F</th>
<th data-quarto-table-cell-role="th">F-C</th>
<th data-quarto-table-cell-role="th">F-G</th>
<th data-quarto-table-cell-role="th">G</th>
<th data-quarto-table-cell-role="th">G-F</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>True</td>
<td>False</td>
<td>False</td>
<td>False</td>
<td>False</td>
<td>False</td>
<td>False</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>False</td>
<td>False</td>
<td>False</td>
<td>False</td>
<td>False</td>
<td>True</td>
<td>False</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>False</td>
<td>False</td>
<td>False</td>
<td>False</td>
<td>False</td>
<td>True</td>
<td>False</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>False</td>
<td>False</td>
<td>False</td>
<td>False</td>
<td>False</td>
<td>True</td>
<td>False</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>False</td>
<td>False</td>
<td>False</td>
<td>False</td>
<td>False</td>
<td>True</td>
<td>False</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">5</td>
<td>False</td>
<td>False</td>
<td>False</td>
<td>False</td>
<td>False</td>
<td>True</td>
<td>False</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">6</td>
<td>False</td>
<td>False</td>
<td>False</td>
<td>False</td>
<td>False</td>
<td>True</td>
<td>False</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">7</td>
<td>True</td>
<td>False</td>
<td>False</td>
<td>False</td>
<td>False</td>
<td>False</td>
<td>False</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">8</td>
<td>False</td>
<td>False</td>
<td>True</td>
<td>False</td>
<td>False</td>
<td>False</td>
<td>False</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">9</td>
<td>True</td>
<td>False</td>
<td>False</td>
<td>False</td>
<td>False</td>
<td>False</td>
<td>False</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>As you can see, the <em>POS</em> column was replaced by 7 columns, one for each of the unique positions in the dataset. But this result is a little awkward, because a position value such as <code>"C-F"</code> means both center and forward. We can use a different encoding scheme to handle this more sensibly:</p>
<div id="d39620e2" class="cell" data-execution_count="127">
<div class="sourceCode cell-code" id="cb209"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb209-1"><a href="#cb209-1" aria-hidden="true" tabindex="-1"></a>dum2 <span class="op">=</span> nba[<span class="st">"POS"</span>].<span class="bu">str</span>.get_dummies(<span class="st">"-"</span>)  <span class="co"># split on hyphen</span></span>
<span id="cb209-2"><a href="#cb209-2" aria-hidden="true" tabindex="-1"></a>dum2.head(<span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="126">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">C</th>
<th data-quarto-table-cell-role="th">F</th>
<th data-quarto-table-cell-role="th">G</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>1</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>0</td>
<td>0</td>
<td>1</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>0</td>
<td>0</td>
<td>1</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>0</td>
<td>0</td>
<td>1</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>0</td>
<td>0</td>
<td>1</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">5</td>
<td>0</td>
<td>0</td>
<td>1</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">6</td>
<td>0</td>
<td>0</td>
<td>1</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">7</td>
<td>1</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">8</td>
<td>0</td>
<td>1</td>
<td>0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">9</td>
<td>1</td>
<td>0</td>
<td>0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>Now we can manually paste together the original data frame with the dummy variables:</p>
<div id="991e4166" class="cell" data-execution_count="128">
<div class="sourceCode cell-code" id="cb210"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb210-1"><a href="#cb210-1" aria-hidden="true" tabindex="-1"></a>nba <span class="op">=</span> pd.concat([nba, dum2], axis<span class="op">=</span><span class="st">"columns"</span>)</span>
<span id="cb210-2"><a href="#cb210-2" aria-hidden="true" tabindex="-1"></a>nba.head(<span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="127">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">NAME</th>
<th data-quarto-table-cell-role="th">POS</th>
<th data-quarto-table-cell-role="th">C</th>
<th data-quarto-table-cell-role="th">F</th>
<th data-quarto-table-cell-role="th">G</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Joel Embiid</td>
<td>C</td>
<td>1</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Jalen Brunson</td>
<td>G</td>
<td>0</td>
<td>0</td>
<td>1</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Damian Lillard</td>
<td>G</td>
<td>0</td>
<td>0</td>
<td>1</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>Shai Gilgeous-Alexander</td>
<td>G</td>
<td>0</td>
<td>0</td>
<td>1</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>Tyrese Maxey</td>
<td>G</td>
<td>0</td>
<td>0</td>
<td>1</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">5</td>
<td>Donovan Mitchell</td>
<td>G</td>
<td>0</td>
<td>0</td>
<td>1</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">6</td>
<td>Luka Doncic</td>
<td>G</td>
<td>0</td>
<td>0</td>
<td>1</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">7</td>
<td>Nikola Jokic</td>
<td>C</td>
<td>1</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">8</td>
<td>LeBron James</td>
<td>F</td>
<td>0</td>
<td>1</td>
<td>0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">9</td>
<td>Anthony Davis</td>
<td>C</td>
<td>1</td>
<td>0</td>
<td>0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>Here’s how it looks for a player who has multiple positions:</p>
<div id="5f41ed82" class="cell" data-execution_count="129">
<div class="sourceCode cell-code" id="cb211"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb211-1"><a href="#cb211-1" aria-hidden="true" tabindex="-1"></a>nba[nba[<span class="st">"NAME"</span>] <span class="op">==</span> <span class="st">"Kelly Oubre Jr."</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="128">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">NAME</th>
<th data-quarto-table-cell-role="th">POS</th>
<th data-quarto-table-cell-role="th">C</th>
<th data-quarto-table-cell-role="th">F</th>
<th data-quarto-table-cell-role="th">G</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">54</td>
<td>Kelly Oubre Jr.</td>
<td>F-G</td>
<td>0</td>
<td>1</td>
<td>1</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</div>

<div class="no-row-height column-margin column-container"><div class="">
<div style="max-width:400px">
<div style="position:relative;padding-bottom:71.25%">
<iframe id="kaltura_player" src="https://cdnapisec.kaltura.com/p/2358381/sp/235838100/embedIframeJs/uiconf_id/43030021/partner_id/2358381?iframeembed=true&amp;playerId=kaltura_player&amp;entry_id=1_hu44cer7&amp;flashvars[streamerType]=auto&amp;flashvars[localizationCode]=en&amp;flashvars[sideBarContainer.plugin]=true&amp;flashvars[sideBarContainer.position]=left&amp;flashvars[sideBarContainer.clickToClose]=true&amp;flashvars[chapters.plugin]=true&amp;flashvars[chapters.layout]=vertical&amp;flashvars[chapters.thumbnailRotator]=false&amp;flashvars[streamSelector.plugin]=true&amp;flashvars[EmbedPlayer.SpinnerTarget]=videoHolder&amp;flashvars[dualScreen.plugin]=true&amp;flashvars[hotspots.plugin]=1&amp;flashvars[Kaltura.addCrossoriginToIframe]=true&amp;&amp;wid=1_yui8jnp5" width="400" height="285" allowfullscreen="" webkitallowfullscreen="" mozallowfullscreen="" allow="autoplay *; fullscreen *; encrypted-media *" sandbox="allow-downloads allow-forms allow-same-origin allow-scripts allow-top-navigation allow-pointer-lock allow-popups allow-modals allow-orientation-lock allow-popups-to-escape-sandbox allow-presentation allow-top-navigation-by-user-activation" frameborder="0" title="Example 1.28" style="position:absolute;top:0;left:0;width:100%;height:100%;border:0">
</iframe>
</div>
</div>
</div></div></section>
</section>
<section id="exercises" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="exercises">Exercises</h2>
<div id="exr-data-types" class="theorem exercise">
<p><span class="theorem-title"><strong>Exercise 1.1</strong></span> For each type of data, classify it as discrete quantitative, continuous quantitative, categorical, or other.</p>
<ol type="a">
<li>How many students are enrolled at a university</li>
<li>Your favorite day of the week</li>
<li>How many inches of rain fall at an airport during one day</li>
<li>Weight of a motor vehicle</li>
<li>Manufacturer of a motor vehicle</li>
<li>Text of all Yelp reviews for a restaurant</li>
<li>Star ratings from all Yelp reviews for a restaurant</li>
<li>Size of the living area of an apartment</li>
<li>DNA nucleotide sequence of a cell</li>
</ol>
</div>
<div id="exr-data-vectors" class="theorem exercise">
<p><span class="theorem-title"><strong>Exercise 1.2</strong></span> Give the length of each vector or series.</p>
<ol type="a">
<li>Morning waking times every day for a week</li>
<li>Number of siblings (max 12) for each student in a class of 30</li>
<li>Position and momentum of a roller coaster car</li>
</ol>
</div>
<div id="exr-test-dummy" class="theorem exercise">
<p><span class="theorem-title"><strong>Exercise 1.3</strong></span> Describe a scheme for creating dummy variables for the days of the week. Use your scheme to encode the vector:</p>
<pre><code>[Tuesday, Sunday, Friday, Tuesday, Monday]</code></pre>
</div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./starting.html" class="pagination-link" aria-label="Getting started">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Getting started</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./stats.html" class="pagination-link" aria-label="Descriptive statistics">
        <span class="nav-page-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Descriptive statistics</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      <ul class="footer-items list-unstyled">
    <li class="nav-item">
 Data Science 1
  </li>  
</ul>
    </div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
    <li class="nav-item">
 Toby Driscoll
  </li>  
</ul>
    </div>
  </div>
</footer>
<script>var lightboxQuarto = GLightbox({"selector":".lightbox","closeEffect":"zoom","openEffect":"zoom","loop":false,"descPosition":"bottom"});
(function() {
  let previousOnload = window.onload;
  window.onload = () => {
    if (previousOnload) {
      previousOnload();
    }
    lightboxQuarto.on('slide_before_load', (data) => {
      const { slideIndex, slideNode, slideConfig, player, trigger } = data;
      const href = trigger.getAttribute('href');
      if (href !== null) {
        const imgEl = window.document.querySelector(`a[href="${href}"] img`);
        if (imgEl !== null) {
          const srcAttr = imgEl.getAttribute("src");
          if (srcAttr && srcAttr.startsWith("data:")) {
            slideConfig.href = srcAttr;
          }
        }
      } 
    });
  
    lightboxQuarto.on('slide_after_load', (data) => {
      const { slideIndex, slideNode, slideConfig, player, trigger } = data;
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(slideNode);
      }
    });
  
  };
  
})();
          </script>




</body></html>